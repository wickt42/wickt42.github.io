<!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta name="description" content="8.7"><meta name="keywords" content=""><meta name="author" content="wickt42"><meta name="copyright" content="wickt42"><title>8.7 | Wickt42's Tech Blog</title><link rel="shortcut icon" href="/melody-favicon.ico"><link rel="stylesheet" href="/css/index.css?version=1.9.1"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome@latest/css/font-awesome.min.css?version=1.9.1"><meta name="format-detection" content="telephone=no"><meta http-equiv="x-dns-prefetch-control" content="on"><link rel="dns-prefetch" href="https://cdn.jsdelivr.net"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><script src="https://v1.hitokoto.cn/?encode=js&amp;charset=utf-8&amp;select=.footer_custom_text" defer></script><script>var GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  copy: {
    success: 'Copy successfully',
    error: 'Copy error',
    noSupport: 'The browser does not support'
  },
  hexoVersion: '7.3.0'
} </script><meta name="generator" content="Hexo 7.3.0"></head><body><canvas class="fireworks"></canvas><i class="fa fa-arrow-right" id="toggle-sidebar" aria-hidden="true"></i><div id="sidebar" data-display="true"><div class="toggle-sidebar-info text-center"><span data-toggle="Toggle article">Toggle site</span><hr></div><div class="sidebar-toc"><div class="sidebar-toc__title">Catalog</div><div class="sidebar-toc__progress"><span class="progress-notice">You've read</span><span class="progress-num">0</span><span class="progress-percentage">%</span><div class="sidebar-toc__progress-bar"></div></div><div class="sidebar-toc__content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#Linux%E7%BD%91%E7%BB%9C%E7%AE%A1%E7%90%86"><span class="toc-number">1.</span> <span class="toc-text">Linux网络管理</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%80%E3%80%81%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5"><span class="toc-number">1.0.1.</span> <span class="toc-text">一、基本概念</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%89%A9%E7%90%86%E7%BD%91%E5%8D%A1%EF%BC%88NIC-Network-Interface-Card%EF%BC%89"><span class="toc-number">1.0.1.1.</span> <span class="toc-text">物理网卡（NIC, Network Interface Card）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%BD%91%E7%BB%9C%E9%80%82%E9%85%8D%E5%99%A8%EF%BC%88Adapter%EF%BC%89"><span class="toc-number">1.0.1.2.</span> <span class="toc-text">网络适配器（Adapter）</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#linux%E4%B8%AD%E5%B8%B8%E8%A7%81%E7%BD%91%E7%BB%9C%E6%8E%A5%E5%8F%A3%E7%B1%BB%E5%9E%8B"><span class="toc-number">1.0.2.</span> <span class="toc-text">linux中常见网络接口类型</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Windows%E4%B8%AD%E7%9A%84%E2%80%9C%E7%BD%91%E7%BB%9C%E9%80%82%E9%85%8D%E5%99%A8%E5%88%86%E7%B1%BB%E2%80%9D"><span class="toc-number">1.0.3.</span> <span class="toc-text">Windows中的“网络适配器分类”</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#linux%E8%B7%AF%E7%94%B1"><span class="toc-number">1.0.4.</span> <span class="toc-text">linux路由</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%85%B3%E9%94%AE%E5%B7%A5%E5%85%B7"><span class="toc-number">1.0.4.1.</span> <span class="toc-text">关键工具</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Linux-%E7%BD%91%E7%BB%9C%E9%85%8D%E7%BD%AE%E6%96%B9%E6%B3%95"><span class="toc-number">1.0.5.</span> <span class="toc-text">Linux 网络配置方法</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%91%BD%E4%BB%A4%E8%A1%8C%E9%85%8D%E7%BD%AE%EF%BC%88%E4%B8%B4%E6%97%B6%E7%94%9F%E6%95%88%EF%BC%89"><span class="toc-number">1.0.5.1.</span> <span class="toc-text">命令行配置（临时生效）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%96%87%E4%BB%B6%E9%85%8D%E7%BD%AE%EF%BC%88%E6%B0%B8%E4%B9%85%E7%94%9F%E6%95%88%EF%BC%89"><span class="toc-number">1.0.5.2.</span> <span class="toc-text">文件配置（永久生效）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#NetworkManager-%E5%B7%A5%E5%85%B7%E9%9B%86"><span class="toc-number">1.0.5.3.</span> <span class="toc-text">NetworkManager 工具集</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%8F%91%E8%A1%8C%E7%89%88%E5%B7%AE%E5%BC%82%E9%85%8D%E7%BD%AE"><span class="toc-number">1.0.5.4.</span> <span class="toc-text">发行版差异配置</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E8%B7%AF%E7%94%B1%E5%AE%9E%E9%AA%8C"><span class="toc-number">2.</span> <span class="toc-text">路由实验</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%9E%E9%AA%8C%E6%8B%93%E6%89%91"><span class="toc-number">2.1.</span> <span class="toc-text">实验拓扑</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%85%8D%E7%BD%AEip"><span class="toc-number">2.2.</span> <span class="toc-text">配置ip</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Windows"><span class="toc-number">2.2.1.</span> <span class="toc-text">Windows</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#kali"><span class="toc-number">2.2.2.</span> <span class="toc-text">kali</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#CentOS"><span class="toc-number">2.2.3.</span> <span class="toc-text">CentOS</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%B5%8B%E8%AF%95%E8%BF%9E%E9%80%9A%E6%80%A7"><span class="toc-number">2.3.</span> <span class="toc-text">测试连通性</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%AE%BE%E7%BD%AE%E8%B7%AF%E7%94%B1%E8%BD%AC%E5%8F%91"><span class="toc-number">2.4.</span> <span class="toc-text">设置路由转发</span></a></li></ol></li></ol></div></div><div class="author-info hide"><div class="author-info__avatar text-center"><img src="https://cdn.jsdelivr.net/gh/wickt42/PicGo.img@main/img/20250729165900674.jpg"></div><div class="author-info__name text-center">wickt42</div><div class="author-info__description text-center">Information Security</div><div class="follow-button"><a target="_blank" rel="noopener" href="https://github.com/wickt42/wickt42.github.io">Follow Me</a></div><hr><div class="author-info-articles"><a class="author-info-articles__archives article-meta" href="/archives"><span class="pull-left">Articles</span><span class="pull-right">17</span></a><a class="author-info-articles__tags article-meta" href="/tags"><span class="pull-left">Tags</span><span class="pull-right">3</span></a><a class="author-info-articles__categories article-meta" href="/categories"><span class="pull-left">Categories</span><span class="pull-right">8</span></a></div><hr><div class="author-info-links"><div class="author-info-links__title text-center">Links</div><a class="author-info-links__name text-center" target="_blank" rel="noopener" href="https://github.com/">github</a><a class="author-info-links__name text-center" target="_blank" rel="noopener" href="https://github.com/Molunerfinn/hexo-theme-melody">hexo-theme-melody</a></div></div></div><div id="content-outer"><div id="top-container" style="background-image: url(https://cdn.jsdelivr.net/gh/wickt42/PicGo.img@main/img/20250729164955479.jpg)"><div id="page-header"><span class="pull-left"> <a id="site-name" href="/">Wickt42's Tech Blog</a></span><i class="fa fa-bars toggle-menu pull-right" aria-hidden="true"></i><span class="pull-right menus">   <a class="site-page" href="/">Home</a><a class="site-page" href="/archives">Archives</a><a class="site-page" href="/tags">Tags</a><a class="site-page" href="/categories">Categories</a><a class="site-page" href="/slides">Slides</a></span><span class="pull-right"></span></div><div id="post-info"><div id="post-title">8.7</div><div id="post-meta"><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2025-08-07</time></div></div></div><div class="layout" id="content-inner"><article id="post"><div class="article-container" id="post-content"><h1 id="Linux网络管理"><a href="#Linux网络管理" class="headerlink" title="Linux网络管理"></a>Linux网络管理</h1><h3 id="一、基本概念"><a href="#一、基本概念" class="headerlink" title="一、基本概念"></a>一、基本概念</h3><h4 id="物理网卡（NIC-Network-Interface-Card）"><a href="#物理网卡（NIC-Network-Interface-Card）" class="headerlink" title="物理网卡（NIC, Network Interface Card）"></a>物理网卡（NIC, Network Interface Card）</h4><ul>
<li>硬件实体：插在主板或扩展槽上的设备（如 Intel千兆网卡、Realtek 无线网卡）。</li>
<li>功能：<ul>
<li>负责物理层（PHY）信号传输（如电信号、光信号）。</li>
<li>支持数据链路层（MAC 地址、帧封装）的基础操作。</li>
</ul>
</li>
</ul>
<h4 id="网络适配器（Adapter）"><a href="#网络适配器（Adapter）" class="headerlink" title="网络适配器（Adapter）"></a>网络适配器（Adapter）</h4><ul>
<li>软件抽象：Windows 系统中驱动程序与服务的集合，管理网卡硬件。</li>
<li>功能：<ul>
<li>加载网卡驱动，提供 API 接口供操作系统调用。</li>
<li>处理网络协议（如 TCP&#x2F;IP）、虚拟化支持（如 Hyper-V 的虚拟网卡）。</li>
<li>在设备管理器中显示为“网络适配器”条目。</li>
</ul>
</li>
</ul>
<h3 id="linux中常见网络接口类型"><a href="#linux中常见网络接口类型" class="headerlink" title="linux中常见网络接口类型"></a>linux中常见网络接口类型</h3><table>
<thead>
<tr>
<th align="left"><strong>接口类型</strong></th>
<th align="left"><strong>作用</strong></th>
<th align="left"><strong>示例</strong></th>
</tr>
</thead>
<tbody><tr>
<td align="left"><strong>物理接口</strong></td>
<td align="left">绑定物理网卡，命名格式 <code>ethX</code> (传统) 或 <code>enpXsY</code> (一致性命名)</td>
<td align="left"><code>eth0</code>, <code>enp3s0</code></td>
</tr>
<tr>
<td align="left"><strong>虚拟接口</strong></td>
<td align="left">纯软件实现的逻辑接口</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">├── <code>lo</code> (环回)</td>
<td align="left">本地通信，固定 IP <code>127.0.0.1</code></td>
<td align="left"><code>lo</code></td>
</tr>
<tr>
<td align="left">├── <code>veth</code> (虚拟对)</td>
<td align="left">成对出现，连接容器&#x2F;网络命名空间</td>
<td align="left"><code>veth0-peer</code></td>
</tr>
<tr>
<td align="left">├── <code>tun/tap</code></td>
<td align="left">用户空间网络隧道（VPN&#x2F;虚拟化）</td>
<td align="left"><code>tun0</code>, <code>tap0</code></td>
</tr>
<tr>
<td align="left"><strong>绑定接口</strong></td>
<td align="left">多网卡聚合提升带宽或冗余</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">├── <code>bondX</code></td>
<td align="left">内核模式链路聚合</td>
<td align="left"><code>bond0</code></td>
</tr>
<tr>
<td align="left">├── <code>teamX</code></td>
<td align="left">更灵活的聚合方案（用户态驱动）</td>
<td align="left"><code>team0</code></td>
</tr>
<tr>
<td align="left"><strong>桥接接口</strong></td>
<td align="left">模拟物理交换机，连接多个接口</td>
<td align="left"><code>br0</code>, <code>virbr0</code></td>
</tr>
<tr>
<td align="left"><strong>VLAN 接口</strong></td>
<td align="left">基于 802.1Q 的虚拟子网接口</td>
<td align="left"><code>eth0.10</code> (VLAN 10)</td>
</tr>
<tr>
<td align="left"><strong>无线接口</strong></td>
<td align="left">无线网卡驱动生成的接口</td>
<td align="left"><code>wlan0</code>, <code>wlp4s0</code></td>
</tr>
</tbody></table>
<h3 id="Windows中的“网络适配器分类”"><a href="#Windows中的“网络适配器分类”" class="headerlink" title="Windows中的“网络适配器分类”"></a>Windows中的“网络适配器分类”</h3><table>
<thead>
<tr>
<th align="left"><strong>类型</strong></th>
<th align="left"><strong>说明</strong></th>
<th align="left"><strong>应用场景</strong></th>
</tr>
</thead>
<tbody><tr>
<td align="left"><strong>物理适配器</strong></td>
<td align="left">管理真实网卡硬件</td>
<td align="left">服务器物理网卡</td>
</tr>
<tr>
<td align="left"><strong>虚拟适配器</strong></td>
<td align="left">纯软件实现的逻辑接口</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">├── Hyper-V 虚拟交换机</td>
<td align="left">连接虚拟机与物理网络 (类似 Linux <code>bridge</code>)</td>
<td align="left">虚拟机网络</td>
</tr>
<tr>
<td align="left">├── WSL 虚拟适配器</td>
<td align="left">为 Linux 子系统提供网络栈</td>
<td align="left">WSL 2 网络</td>
</tr>
<tr>
<td align="left">├── VPN 适配器</td>
<td align="left">创建加密隧道 (如 L2TP&#x2F;IPsec)</td>
<td align="left">远程访问</td>
</tr>
<tr>
<td align="left"><strong>团队适配器</strong></td>
<td align="left">将多块物理网卡聚合成单一逻辑接口</td>
<td align="left">带宽叠加&#x2F;故障转移</td>
</tr>
</tbody></table>
<h3 id="linux路由"><a href="#linux路由" class="headerlink" title="linux路由"></a>linux路由</h3><p><strong>1. 核心概念</strong></p>
<ul>
<li><strong>路由表</strong>：存储目标网络与下一跳的映射关系，默认表 <code>main</code>。</li>
<li><strong>默认网关</strong>：目标 <code>0.0.0.0/0</code> 的路径，用于未知流量转发。</li>
</ul>
<p><strong>2. 关键操作</strong></p>
<p>bash</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"># 查看路由表</span><br><span class="line">ip route show    # 推荐（现代）</span><br><span class="line">route -n         # 传统命令</span><br><span class="line"></span><br><span class="line"># 添加/删除路由</span><br><span class="line">sudo ip route add 192.168.2.0/24 via 10.0.0.1 dev eth0</span><br><span class="line">sudo ip route del default via 192.168.1.1</span><br><span class="line"></span><br><span class="line"># 持久化路由（各发行版不同）</span><br><span class="line"># Debian/Ubuntu: /etc/network/interfaces</span><br><span class="line">up ip route add 10.1.0.0/16 via 192.168.1.254</span><br><span class="line"></span><br><span class="line"># CentOS/RHEL: /etc/sysconfig/network-scripts/route-eth0</span><br><span class="line">10.2.0.0/16 via 192.168.1.253</span><br></pre></td></tr></table></figure>

<p><strong>3. 高级路由</strong></p>
<ul>
<li><p><strong>策略路由</strong>：基于源 IP&#x2F;端口等条件选择不同路由表</p>
<p>bash</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">ip rule add from 192.168.5.100 lookup custom_table</span><br><span class="line">ip route add default via 10.8.0.1 table custom_table</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>多网关负载均衡</strong>：结合 <code>ip route</code> 与 <code>iptables</code> 标记实现流量分流。</p>
</li>
</ul>
<h4 id="关键工具"><a href="#关键工具" class="headerlink" title="关键工具"></a>关键工具</h4><table>
<thead>
<tr>
<th align="left"><strong>功能</strong></th>
<th align="left"><strong>命令</strong></th>
<th align="left"><strong>用途</strong></th>
</tr>
</thead>
<tbody><tr>
<td align="left">接口配置</td>
<td align="left"><code>ip link</code>, <code>ifconfig</code> (旧)</td>
<td align="left">查看&#x2F;设置接口状态</td>
</tr>
<tr>
<td align="left">IP 地址管理</td>
<td align="left"><code>ip addr</code>, <code>ifconfig</code></td>
<td align="left">分配 IP 地址</td>
</tr>
<tr>
<td align="left">路由操作</td>
<td align="left"><code>ip route</code>, <code>route</code></td>
<td align="left">管理路由表</td>
</tr>
<tr>
<td align="left">邻居表 (ARP)</td>
<td align="left"><code>ip neigh</code>, <code>arp</code></td>
<td align="left">查看 MAC 地址缓存</td>
</tr>
<tr>
<td align="left">网络诊断</td>
<td align="left"><code>ping</code>, <code>traceroute</code>, <code>mtr</code></td>
<td align="left">连通性测试与路径跟踪</td>
</tr>
<tr>
<td align="left">高级工具</td>
<td align="left"><code>ethtool</code> (网卡参数)</td>
<td align="left">查看链路状态、协商模式等</td>
</tr>
<tr>
<td align="left"></td>
<td align="left"><code>ss</code> (替代 netstat)</td>
<td align="left">监控连接与端口</td>
</tr>
</tbody></table>
<h3 id="Linux-网络配置方法"><a href="#Linux-网络配置方法" class="headerlink" title="Linux 网络配置方法"></a>Linux 网络配置方法</h3><table>
<thead>
<tr>
<th align="left"><strong>类型</strong></th>
<th align="left"><strong>生效时间</strong></th>
<th align="left"><strong>持久性</strong></th>
<th align="left"><strong>适用场景</strong></th>
</tr>
</thead>
<tbody><tr>
<td align="left"><strong>命令行配置</strong></td>
<td align="left">立即生效</td>
<td align="left">重启后失效</td>
<td align="left">临时调试、快速验证</td>
</tr>
<tr>
<td align="left"><strong>文件配置</strong></td>
<td align="left">需重启网络服务</td>
<td align="left">永久生效</td>
<td align="left">生产环境、服务器固化管理</td>
</tr>
<tr>
<td align="left"><strong>NetworkManager</strong></td>
<td align="left">立即生效</td>
<td align="left">自动持久化</td>
<td align="left">桌面环境、动态网络管理</td>
</tr>
</tbody></table>
<h4 id="命令行配置（临时生效）"><a href="#命令行配置（临时生效）" class="headerlink" title="命令行配置（临时生效）"></a>命令行配置（临时生效）</h4><p><strong>1. 基础工具集 (iproute2)</strong></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 查看所有接口</span></span><br><span class="line">ip <span class="built_in">link</span> show</span><br><span class="line"></span><br><span class="line"><span class="comment"># 启用/禁用接口</span></span><br><span class="line">ip <span class="built_in">link</span> <span class="built_in">set</span> eth0 up</span><br><span class="line">ip <span class="built_in">link</span> <span class="built_in">set</span> wlan0 down</span><br><span class="line"></span><br><span class="line"><span class="comment"># 配置IP地址（添加/删除）</span></span><br><span class="line">ip addr add 192.168.1.100/24 dev eth0</span><br><span class="line">ip addr del 192.168.1.100/24 dev eth0</span><br><span class="line"></span><br><span class="line"><span class="comment"># 配置默认网关</span></span><br><span class="line">ip route add default via 192.168.1.1</span><br></pre></td></tr></table></figure>

<p><strong>2. 传统工具 (net-tools)</strong></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 启用接口</span></span><br><span class="line">ifconfig eth0 up</span><br><span class="line"></span><br><span class="line"><span class="comment"># 配置IP地址</span></span><br><span class="line">ifconfig eth0 192.168.1.100 netmask 255.255.255.0</span><br><span class="line"></span><br><span class="line"><span class="comment"># 配置网关</span></span><br><span class="line">route add default gw 192.168.1.1</span><br></pre></td></tr></table></figure>

<p><strong>3. DNS 临时配置</strong></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 修改DNS解析（立即生效，重启失效）</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;nameserver 8.8.8.8&quot;</span> &gt; /etc/resolv.conf</span><br></pre></td></tr></table></figure>

<h4 id="文件配置（永久生效）"><a href="#文件配置（永久生效）" class="headerlink" title="文件配置（永久生效）"></a>文件配置（永久生效）</h4><p><strong>1. 通用配置文件</strong></p>
<table>
<thead>
<tr>
<th align="left"><strong>文件路径</strong></th>
<th align="left"><strong>作用</strong></th>
<th align="left"><strong>示例内容</strong></th>
</tr>
</thead>
<tbody><tr>
<td align="left"><code>/etc/network/interfaces</code></td>
<td align="left">Debian&#x2F;Ubuntu 主配置文件</td>
<td align="left"><code>auto eth0</code> <code>iface eth0 inet static</code> <code>address 192.168.1.100</code> <code>netmask 255.255.255.0</code> <code>gateway 192.168.1.1</code></td>
</tr>
<tr>
<td align="left"><code>/etc/sysconfig/network-scripts/ifcfg-eth0</code></td>
<td align="left">RHEL&#x2F;CentOS 接口配置</td>
<td align="left"><code>DEVICE=eth0</code> <code>BOOTPROTO=static</code> <code>IPADDR=192.168.1.100</code> <code>NETMASK=255.255.255.0</code> <code>GATEWAY=192.168.1.1</code> <code>ONBOOT=yes</code></td>
</tr>
<tr>
<td align="left"><code>/etc/resolv.conf</code></td>
<td align="left">DNS 解析配置</td>
<td align="left"><code>nameserver 8.8.8.8</code> <code>nameserver 1.1.1.1</code></td>
</tr>
<tr>
<td align="left"><code>/etc/hosts</code></td>
<td align="left">本地主机名解析</td>
<td align="left"><code>192.168.1.100 myserver.lo</code></td>
</tr>
</tbody></table>
<p> <strong>服务重启命令</strong></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># Debian/Ubuntu</span></span><br><span class="line"><span class="built_in">sudo</span> systemctl restart networking</span><br><span class="line"></span><br><span class="line"><span class="comment"># RHEL/CentOS 7+</span></span><br><span class="line"><span class="built_in">sudo</span> systemctl restart NetworkManager  <span class="comment"># 或 network.service</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 传统方式</span></span><br><span class="line"><span class="built_in">sudo</span> /etc/init.d/networking restart</span><br></pre></td></tr></table></figure>

<h4 id="NetworkManager-工具集"><a href="#NetworkManager-工具集" class="headerlink" title="NetworkManager 工具集"></a>NetworkManager 工具集</h4><p><strong>1. nmcli (命令行)</strong></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 查看连接</span></span><br><span class="line">nmcli connection show</span><br><span class="line"></span><br><span class="line"><span class="comment"># 查看特定连接</span></span><br><span class="line">nmcli connection show <span class="string">&quot;eth160&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 创建静态IP连接</span></span><br><span class="line">nmcli con add con-name <span class="string">&quot;eth0-static&quot;</span> ifname eth0 <span class="built_in">type</span> ethernet \</span><br><span class="line">ip4 192.168.1.100/24 gw4 192.168.1.1</span><br><span class="line"></span><br><span class="line"><span class="comment"># 配置DNS</span></span><br><span class="line">nmcli con mod <span class="string">&quot;eth0-static&quot;</span> ipv4.dns <span class="string">&quot;8.8.8.8 1.1.1.1&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 激活连接</span></span><br><span class="line">nmcli con up <span class="string">&quot;eth0-static&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 启动 eth0</span></span><br><span class="line">nmcli connection up eth0</span><br><span class="line"></span><br><span class="line"><span class="comment"># 禁用 wlan0</span></span><br><span class="line">nmcli connection down wlan0</span><br><span class="line"></span><br><span class="line"><span class="comment"># 关闭网卡</span></span><br><span class="line">nmcli connection reload</span><br></pre></td></tr></table></figure>

<p><strong>2. nmtui (文本界面)</strong></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">sudo</span> nmtui  <span class="comment"># 启动交互式配置界面</span></span><br></pre></td></tr></table></figure>

<p><strong>3. 图形界面 (桌面环境)</strong></p>
<ul>
<li>GNOME：<code>gnome-control-center network</code></li>
<li>KDE：<code>kcmshell5 networkmanagement</code></li>
</ul>
<h4 id="发行版差异配置"><a href="#发行版差异配置" class="headerlink" title="发行版差异配置"></a>发行版差异配置</h4><p><strong>Debian&#x2F;Ubuntu</strong></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># DHCP 配置示例 (/etc/network/interfaces)</span></span><br><span class="line">auto eth0</span><br><span class="line">iface eth0 inet dhcp</span><br><span class="line"></span><br><span class="line"><span class="comment"># 静态IP 配置示例</span></span><br><span class="line">iface eth0 inet static</span><br><span class="line">    address 192.168.1.100</span><br><span class="line">    netmask 255.255.255.0</span><br><span class="line">    gateway 192.168.1.1</span><br><span class="line">    dns-nameservers 8.8.8.8</span><br></pre></td></tr></table></figure>

<p><strong>RHEL&#x2F;CentOS</strong></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 静态IP配置 (/etc/sysconfig/network-scripts/ifcfg-eth0)</span></span><br><span class="line">DEVICE=eth0</span><br><span class="line">TYPE=Ethernet</span><br><span class="line">ONBOOT=<span class="built_in">yes</span></span><br><span class="line">BOOTPROTO=static</span><br><span class="line">IPADDR=192.168.1.100</span><br><span class="line">NETMASK=255.255.255.0</span><br><span class="line">GATEWAY=192.168.1.1</span><br><span class="line">DNS1=8.8.8.8</span><br></pre></td></tr></table></figure>

<p><strong>Arch Linux</strong></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 使用 netctl</span></span><br><span class="line"><span class="built_in">sudo</span> <span class="built_in">cp</span> /etc/netctl/examples/ethernet-static /etc/netctl/eth0-profile</span><br><span class="line"><span class="built_in">sudo</span> nano /etc/netctl/eth0-profile  <span class="comment"># 编辑配置</span></span><br><span class="line"><span class="built_in">sudo</span> netctl <span class="built_in">enable</span> eth0-profile    <span class="comment"># 设置开机自启</span></span><br></pre></td></tr></table></figure>



<h1 id="路由实验"><a href="#路由实验" class="headerlink" title="路由实验"></a>路由实验</h1><h2 id="实验拓扑"><a href="#实验拓扑" class="headerlink" title="实验拓扑"></a>实验拓扑</h2><p><img src="https://cdn.jsdelivr.net/gh/wickt42/PicGo.img@main/img/20250807195501932.png" alt="lQLPJxq7y8Zb7uHNA17NBUqwyZuHCQGMhIQIcjQ8hfzxAA_1354_862"></p>
<h2 id="配置ip"><a href="#配置ip" class="headerlink" title="配置ip"></a>配置ip</h2><h3 id="Windows"><a href="#Windows" class="headerlink" title="Windows"></a>Windows</h3><p>设置网络适配器</p>
<p><img src="https://cdn.jsdelivr.net/gh/wickt42/PicGo.img@main/img/20250807195952124.png" alt="image-20250807195952091"></p>
<p>配置IP</p>
<p><img src="https://cdn.jsdelivr.net/gh/wickt42/PicGo.img@main/img/20250807200311158.png" alt="image-20250807200311118"></p>
<h3 id="kali"><a href="#kali" class="headerlink" title="kali"></a>kali</h3><p>设置网络适配器</p>
<p><img src="https://cdn.jsdelivr.net/gh/wickt42/PicGo.img@main/img/20250807195845784.png" alt="image-20250807195845750"></p>
<p>进入系统后首先备份配置文件</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">┌──(root㉿kali)-[~/Desktop]</span><br><span class="line">└─# <span class="built_in">mv</span> /etc/network/interfaces /etc/network/interfaces.back</span><br></pre></td></tr></table></figure>

<p><img src="https://cdn.jsdelivr.net/gh/wickt42/PicGo.img@main/img/20250807200631904.png" alt="image-20250807200631867"></p>
<p>编写新配置文件</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">┌──(root㉿kali)-[~/Desktop]</span><br><span class="line">└─# vim /etc/network/interfaces</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># /etc/network/interfaces 文件配置内容</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># This file describes the network interfaces available on your system</span></span><br><span class="line"><span class="comment"># and how to activate them. For more information, see interfaces(5).</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">source</span> /etc/network/interfaces.d/*</span><br><span class="line"></span><br><span class="line"><span class="comment"># The loopback network interface</span></span><br><span class="line">auto lo</span><br><span class="line">iface lo inet loopback</span><br><span class="line"></span><br><span class="line">auto eth0</span><br><span class="line">iface eth0 inet static</span><br><span class="line">	address 172.16.2.1</span><br><span class="line">	netmask 255.255.255.0</span><br><span class="line">	gateway 172.16.2.254</span><br></pre></td></tr></table></figure>

<p><img src="https://cdn.jsdelivr.net/gh/wickt42/PicGo.img@main/img/20250807200924409.png" alt="image-20250807200924360"></p>
<p>重启服务并查看配置是否成功</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">┌──(root㉿kali)-[~/Desktop]</span><br><span class="line">└─# systemctl restart networking</span><br><span class="line"></span><br><span class="line">┌──(root㉿kali)-[~/Desktop]</span><br><span class="line">└─# ip a</span><br></pre></td></tr></table></figure>

<p><img src="https://cdn.jsdelivr.net/gh/wickt42/PicGo.img@main/img/20250807210506078.png" alt="image-20250807210506021"></p>
<h3 id="CentOS"><a href="#CentOS" class="headerlink" title="CentOS"></a>CentOS</h3><p>设置网络适配器</p>
<p><img src="https://cdn.jsdelivr.net/gh/wickt42/PicGo.img@main/img/20250807200050867.png" alt="image-20250807200050833"></p>
<p>进入系统后首先备份配置文件</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">[root@wickt 桌面]# <span class="built_in">mv</span> /etc/sysconfig/network-scripts/ifcfg-ens160 /etc/sysconfig/network-scripts/ifcfg-ens160.back</span><br><span class="line">[root@wickt 桌面]# <span class="built_in">mv</span> /etc/sysconfig/network-scripts/ifcfg-ens192 /etc/sysconfig/network-scripts/ifcfg-ens192.back</span><br><span class="line">[root@wickt 桌面]# <span class="built_in">ls</span> -l /etc/sysconfig/network-scripts/</span><br><span class="line">总用量 8</span><br><span class="line">-rw-r--r--. 1 root root 312 7月  28 19:27 ifcfg-ens160.back</span><br><span class="line">-rw-r--r--. 1 root root 281 7月  28 19:27 ifcfg-ens192.back</span><br><span class="line">[root@wickt 桌面]# </span><br></pre></td></tr></table></figure>

<p><img src="https://cdn.jsdelivr.net/gh/wickt42/PicGo.img@main/img/20250807201853462.png" alt="image-20250807201853428"></p>
<p>接着创建新配置文件并修改</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">[root@wickt 桌面]# vim /etc/sysconfig/network-scripts/ifcfg-ens160</span><br><span class="line">TYPE=<span class="string">&quot;Ethernet&quot;</span></span><br><span class="line">BOOTPROTO=<span class="string">&quot;none&quot;</span></span><br><span class="line">IPADDR=<span class="string">&quot;192.168.2.254&quot;</span></span><br><span class="line">PREFIX=<span class="string">&quot;24&quot;</span></span><br><span class="line">DEVICE=<span class="string">&quot;ens160&quot;</span></span><br><span class="line">ONBOOT=<span class="string">&quot;yes&quot;</span></span><br><span class="line"></span><br><span class="line">[root@wickt 桌面]# vim /etc/sysconfig/network-scripts/ifcfg-ens192</span><br><span class="line">TYPE=<span class="string">&quot;Ethernet&quot;</span></span><br><span class="line">BOOTPROTO=<span class="string">&quot;static&quot;</span></span><br><span class="line">IPADDR=<span class="string">&quot;172.16.2.254&quot;</span></span><br><span class="line">NETMAK=<span class="string">&quot;255.255.255.255.0&quot;</span></span><br><span class="line">DEVICE=<span class="string">&quot;ens192&quot;</span></span><br><span class="line">ONBOOT=<span class="string">&quot;yes&quot;</span></span><br></pre></td></tr></table></figure>

<p>完成配置后重启服务</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">[root@wickt 桌面]# nmcli connection reload</span><br><span class="line">[root@wickt 桌面]# nmcli connection up ens160</span><br><span class="line">[root@wickt 桌面]# nmcli connection up ens192</span><br><span class="line">[root@wickt 桌面]# systemctl restart NetworkManager</span><br></pre></td></tr></table></figure>

<p><img src="https://cdn.jsdelivr.net/gh/wickt42/PicGo.img@main/img/20250807202754624.png" alt="image-20250807202754579"></p>
<p><img src="https://cdn.jsdelivr.net/gh/wickt42/PicGo.img@main/img/20250807203359578.png" alt="image-20250807203359522"></p>
<p><img src="https://cdn.jsdelivr.net/gh/wickt42/PicGo.img@main/img/20250807203423837.png" alt="image-20250807203423799"></p>
<h2 id="测试连通性"><a href="#测试连通性" class="headerlink" title="测试连通性"></a>测试连通性</h2><p>Win10主机与网关CentOS 8 的 ens160 网卡的通信</p>
<p><img src="https://cdn.jsdelivr.net/gh/wickt42/PicGo.img@main/img/20250807203636967.png" alt="image-20250807203636924"></p>
<p>kali主机与网关CentOS 8 的 ens192 网卡的通信</p>
<p><img src="https://cdn.jsdelivr.net/gh/wickt42/PicGo.img@main/img/20250807210442184.png" alt="image-20250807210442135"></p>
<p>kali主机与Win10主机的连通性测试</p>
<p><img src="https://cdn.jsdelivr.net/gh/wickt42/PicGo.img@main/img/20250807211352491.png" alt="image-20250807211352455"></p>
<h2 id="设置路由转发"><a href="#设置路由转发" class="headerlink" title="设置路由转发"></a>设置路由转发</h2><p>修改<code>/proc/sys/net/ipv4/ip_forward</code>文件</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[root@wickt 桌面]# cat /proc/sys/net/ipv4/ip_forward</span><br><span class="line">0</span><br><span class="line">[root@wickt 桌面]# echo 1 &gt; /proc/sys/net/ipv4/ip_forward</span><br><span class="line">[root@wickt 桌面]# cat /proc/sys/net/ipv4/ip_forward</span><br><span class="line">1</span><br><span class="line">[root@wickt 桌面]# </span><br></pre></td></tr></table></figure>

<p><img src="https://cdn.jsdelivr.net/gh/wickt42/PicGo.img@main/img/20250807210819615.png" alt="image-20250807210819584"></p>
<p>再次测试kali主机与Win10主机的连通性</p>
<p><img src="https://cdn.jsdelivr.net/gh/wickt42/PicGo.img@main/img/20250807214127041.png" alt="image-20250807214126974"></p>
</div></article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">Author: </span><span class="post-copyright-info"><a href="mailto:undefined">wickt42</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">Link: </span><span class="post-copyright-info"><a href="http://example.com/2025/08/07/8-7/">http://example.com/2025/08/07/8-7/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">Copyright Notice: </span><span class="post-copyright-info">All articles in this blog are licensed under <a target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a> unless stating additionally.</span></div></div><div class="post-meta__tag-list"></div><nav id="pagination"><div class="prev-post pull-left"><a href="/2025/08/07/8-7%20-%202/"><i class="fa fa-chevron-left">  </i><span>8.7</span></a></div><div class="next-post pull-right"><a href="/2025/08/06/8-6-work%20-%202/"><span>8.6_work</span><i class="fa fa-chevron-right"></i></a></div></nav></div></div><footer class="footer-bg" style="background-image: url(https://cdn.jsdelivr.net/gh/wickt42/PicGo.img@main/img/20250729164955479.jpg)"><div class="layout" id="footer"><div class="copyright">&copy;2013 - 2025 By wickt42</div><div class="framework-info"><span>Driven - </span><a target="_blank" rel="noopener" href="http://hexo.io"><span>Hexo</span></a><span class="footer-separator">|</span><span>Theme - </span><a target="_blank" rel="noopener" href="https://github.com/Molunerfinn/hexo-theme-melody"><span>Melody</span></a></div><div class="footer_custom_text">hitokoto</div><div class="busuanzi"><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><span id="busuanzi_container_page_pv"><i class="fa fa-file"></i><span id="busuanzi_value_page_pv"></span><span></span></span></div></div></footer><i class="fa fa-arrow-up" id="go-up" aria-hidden="true"></i><script src="https://cdn.jsdelivr.net/npm/animejs@latest/lib/anime.min.js"></script><script src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js"></script><script src="https://cdn.jsdelivr.net/npm/velocity-animate@latest/velocity.min.js"></script><script src="https://cdn.jsdelivr.net/npm/velocity-ui-pack@latest/velocity.ui.min.js"></script><script src="/js/utils.js?version=1.9.1"></script><script src="/js/fancybox.js?version=1.9.1"></script><script src="/js/sidebar.js?version=1.9.1"></script><script src="/js/copy.js?version=1.9.1"></script><script src="/js/fireworks.js?version=1.9.1"></script><script src="/js/transition.js?version=1.9.1"></script><script src="/js/scroll.js?version=1.9.1"></script><script src="/js/head.js?version=1.9.1"></script><script>if(/Android|webOS|iPhone|iPod|iPad|BlackBerry/i.test(navigator.userAgent)) {
  $('#nav').addClass('is-mobile')
  $('footer').addClass('is-mobile')
  $('#top-container').addClass('is-mobile')
}</script><script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"pluginRootPath":"live2dw/","pluginJsPath":"lib/","pluginModelPath":"assets/","model":{"jsonPath":"/live2dw/assets/tororo.model.json"},"display":{"superSample":2,"width":210,"height":420,"position":"left","hOffset":0,"vOffset":-20},"log":false,"tagMode":false});</script></body></html>