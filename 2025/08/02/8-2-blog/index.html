<!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta name="description" content="Linux综合基础测试"><meta name="keywords" content="Linux"><meta name="author" content="wickt42"><meta name="copyright" content="wickt42"><title>Linux综合基础测试 | Wickt42's Tech Blog</title><link rel="shortcut icon" href="/melody-favicon.ico"><link rel="stylesheet" href="/css/index.css?version=1.9.1"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome@latest/css/font-awesome.min.css?version=1.9.1"><meta name="format-detection" content="telephone=no"><meta http-equiv="x-dns-prefetch-control" content="on"><link rel="dns-prefetch" href="https://cdn.jsdelivr.net"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><script src="https://v1.hitokoto.cn/?encode=js&amp;charset=utf-8&amp;select=.footer_custom_text" defer></script><script>var GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  copy: {
    success: 'Copy successfully',
    error: 'Copy error',
    noSupport: 'The browser does not support'
  },
  hexoVersion: '7.3.0'
} </script><meta name="generator" content="Hexo 7.3.0"></head><body><canvas class="fireworks"></canvas><i class="fa fa-arrow-right" id="toggle-sidebar" aria-hidden="true"></i><div id="sidebar" data-display="true"><div class="toggle-sidebar-info text-center"><span data-toggle="Toggle article">Toggle site</span><hr></div><div class="sidebar-toc"><div class="sidebar-toc__title">Catalog</div><div class="sidebar-toc__progress"><span class="progress-notice">You've read</span><span class="progress-num">0</span><span class="progress-percentage">%</span><div class="sidebar-toc__progress-bar"></div></div><div class="sidebar-toc__content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#Linux%E7%BB%BC%E5%90%88%E5%9F%BA%E7%A1%80%E6%B5%8B%E8%AF%95"><span class="toc-number">1.</span> <span class="toc-text">Linux综合基础测试</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%9E%E9%AA%8C1%EF%BC%9A%E6%96%87%E4%BB%B6%E7%9B%AE%E5%BD%95%E7%BB%93%E6%9E%84%E4%B8%8E%E5%9F%BA%E6%9C%AC%E5%91%BD%E4%BB%A4%E6%93%8D%E4%BD%9C"><span class="toc-number">1.1.</span> <span class="toc-text">实验1：文件目录结构与基本命令操作</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%9E%E9%AA%8C2%EF%BC%9A%E7%94%A8%E6%88%B7%E4%B8%8E%E7%BB%84%E7%AE%A1%E7%90%86"><span class="toc-number">1.2.</span> <span class="toc-text">实验2：用户与组管理</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%9E%E9%AA%8C3%EF%BC%9A%E6%9D%83%E9%99%90%E7%AE%A1%E7%90%86-UGO"><span class="toc-number">1.3.</span> <span class="toc-text">实验3：权限管理(UGO)</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%9E%E9%AA%8C4%EF%BC%9ASUID%E6%9D%83%E9%99%90%E5%BA%94%E7%94%A8"><span class="toc-number">1.4.</span> <span class="toc-text">实验4：SUID权限应用</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%9E%E9%AA%8C5%EF%BC%9A%E6%96%87%E4%BB%B6%E5%B1%9E%E6%80%A7%E4%BF%9D%E6%8A%A4"><span class="toc-number">1.5.</span> <span class="toc-text">实验5：文件属性保护</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%9E%E9%AA%8C6%EF%BC%9Asudo%E6%9D%83%E9%99%90%E9%85%8D%E7%BD%AE"><span class="toc-number">1.6.</span> <span class="toc-text">实验6：sudo权限配置</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%9E%E9%AA%8C7%EF%BC%9A%E7%BB%BC%E5%90%88%E6%9D%83%E9%99%90%E7%AE%A1%E7%90%86"><span class="toc-number">1.7.</span> <span class="toc-text">实验7：综合权限管理</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%9E%E9%AA%8C8%EF%BC%9A%E6%97%A5%E5%BF%97%E5%88%86%E6%9E%90%E4%B8%8E%E5%AE%89%E5%85%A8%E5%AE%A1%E8%AE%A1"><span class="toc-number">1.8.</span> <span class="toc-text">实验8：日志分析与安全审计</span></a></li></ol></li></ol></div></div><div class="author-info hide"><div class="author-info__avatar text-center"><img src="https://gitee.com/John_wick_k/giteepicgo.img/raw/master/img/20250803150758061.jpg"></div><div class="author-info__name text-center">wickt42</div><div class="author-info__description text-center">Information Security</div><div class="follow-button"><a target="_blank" rel="noopener" href="https://github.com/wickt42/wickt42.github.io">Follow Me</a></div><hr><div class="author-info-articles"><a class="author-info-articles__archives article-meta" href="/archives"><span class="pull-left">Articles</span><span class="pull-right">10</span></a><a class="author-info-articles__tags article-meta" href="/tags"><span class="pull-left">Tags</span><span class="pull-right">3</span></a><a class="author-info-articles__categories article-meta" href="/categories"><span class="pull-left">Categories</span><span class="pull-right">8</span></a></div><hr><div class="author-info-links"><div class="author-info-links__title text-center">Links</div><a class="author-info-links__name text-center" target="_blank" rel="noopener" href="https://github.com/">github</a><a class="author-info-links__name text-center" target="_blank" rel="noopener" href="https://github.com/Molunerfinn/hexo-theme-melody">hexo-theme-melody</a></div></div></div><div id="content-outer"><div id="top-container" style="background-image: url(https://gitee.com/John_wick_k/giteepicgo.img/raw/master/img/20250803150508868.jpg)"><div id="page-header"><span class="pull-left"> <a id="site-name" href="/">Wickt42's Tech Blog</a></span><i class="fa fa-bars toggle-menu pull-right" aria-hidden="true"></i><span class="pull-right menus">   <a class="site-page" href="/">Home</a><a class="site-page" href="/archives">Archives</a><a class="site-page" href="/tags">Tags</a><a class="site-page" href="/categories">Categories</a><a class="site-page" href="/slides">Slides</a></span><span class="pull-right"></span></div><div id="post-info"><div id="post-title">Linux综合基础测试</div><div id="post-meta"><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2025-08-02</time><span class="post-meta__separator">|</span><i class="fa fa-inbox post-meta__icon" aria-hidden="true"></i><a class="post-meta__categories" href="/categories/Linux/">Linux</a><i class="fa fa-angle-right" aria-hidden="true"></i><i class="fa fa-inbox post-meta__icon" aria-hidden="true"></i><a class="post-meta__categories" href="/categories/Linux/%E7%BB%BC%E5%90%88%E5%BA%94%E7%94%A8/">综合应用</a></div></div></div><div class="layout" id="content-inner"><article id="post"><div class="article-container" id="post-content"><h1 id="Linux综合基础测试"><a href="#Linux综合基础测试" class="headerlink" title="Linux综合基础测试"></a>Linux综合基础测试</h1><h2 id="实验1：文件目录结构与基本命令操作"><a href="#实验1：文件目录结构与基本命令操作" class="headerlink" title="实验1：文件目录结构与基本命令操作"></a>实验1：文件目录结构与基本命令操作</h2><p>1、在&#x2F;tmp目录下创建如下目录结构：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">/tmp/test/</span><br><span class="line">├── dir1/</span><br><span class="line">│   ├── file1.txt</span><br><span class="line">│   └── file2.txt</span><br><span class="line">├── dir2/</span><br><span class="line">│   └── subdir/</span><br><span class="line">└── file3.txt</span><br></pre></td></tr></table></figure>

<p>命令</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">mkdir</span> -p /tmp/test/&#123;dir1,dir2&#125;		<span class="comment"># -p 递归创建目录</span></span><br><span class="line"><span class="built_in">mkdir</span> /tmp/test/dir2/subdir/</span><br><span class="line"><span class="built_in">touch</span> /tmp/test/file3.txt</span><br><span class="line"><span class="built_in">touch</span> /tmp/test/dir1/&#123;file1.txt,file2.txt&#125;		<span class="comment"># 创建多个文件</span></span><br></pre></td></tr></table></figure>

<p><img src="https://cdn.jsdelivr.net/gh/wickt42/PicGo.img@main/img/20250802095927621.png" alt="image-20250802095920579"></p>
<p>2、将dir1目录及其内容复制到dir2&#x2F;subdir下</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">cp</span> -r /tmp/test/dir1/ /tmp/test/dir2/subdir/	<span class="comment"># -r 移动整个目录</span></span><br></pre></td></tr></table></figure>

<p><img src="https://cdn.jsdelivr.net/gh/wickt42/PicGo.img@main/img/20250802100115133.png" alt="image-20250802100115109"></p>
<p>3、查找&#x2F;tmp目录下所有.txt文件并显示详细信息</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">find /tmp -name <span class="string">&quot;*.txt&quot;</span> -<span class="built_in">exec</span> <span class="built_in">ls</span> -l &#123;&#125; +		<span class="comment"># 查找tmp目录下名为.txt的文件再使用 ls -l 命令查看详细信息</span></span><br></pre></td></tr></table></figure>

<p><img src="https://cdn.jsdelivr.net/gh/wickt42/PicGo.img@main/img/20250802100338434.png" alt="image-20250802100338398"></p>
<p>4、将file3.txt移动到dir1目录并重命名为newfile.txt</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">mv</span> /tmp/test/file3.txt /tmp/test/dir1/newfile.txt		<span class="comment"># mv重命名文件</span></span><br></pre></td></tr></table></figure>

<p><img src="https://cdn.jsdelivr.net/gh/wickt42/PicGo.img@main/img/20250802100602473.png" alt="image-20250802100602437"></p>
<h2 id="实验2：用户与组管理"><a href="#实验2：用户与组管理" class="headerlink" title="实验2：用户与组管理"></a>实验2：用户与组管理</h2><p>1、创建用户user1、user2和组group1</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">useradd user1		<span class="comment"># 密码为123</span></span><br><span class="line">useradd user2</span><br><span class="line">groupadd group1</span><br></pre></td></tr></table></figure>

<p><img src="https://cdn.jsdelivr.net/gh/wickt42/PicGo.img@main/img/20250802101433101.png" alt="image-20250802101433065"></p>
<p>2、将user1和user2加入group1组</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">usermod -aG group1 user1		<span class="comment"># -aG 添加到附加组</span></span><br><span class="line">usermod -aG group1 user2</span><br></pre></td></tr></table></figure>

<p><img src="https://cdn.jsdelivr.net/gh/wickt42/PicGo.img@main/img/20250802101733113.png" alt="image-20250802101733086"></p>
<p>3、创建目录&#x2F;shared，设置权限使group1组成员可以读写，其他人无权限</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">mkdir</span> /shared</span><br><span class="line"><span class="built_in">chown</span> .group1 /shared/		<span class="comment"># 修改属组为group1</span></span><br><span class="line"><span class="built_in">chmod</span> 770 /shared/			<span class="comment"># 修改权限，属主rwx、属组rwx、其他没权限，创建文件需要w和x权限</span></span><br></pre></td></tr></table></figure>

<p><img src="https://cdn.jsdelivr.net/gh/wickt42/PicGo.img@main/img/20250802102748301.png" alt="image-20250802102748276"></p>
<p>4、验证user1可以在&#x2F;shared中创建文件，user3(非组成员)不能访问</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">su - user1</span><br><span class="line"><span class="built_in">touch</span> /shared/us1.txt</span><br><span class="line"></span><br><span class="line">su - user3</span><br><span class="line"><span class="built_in">touch</span> /shared/us3.txt</span><br></pre></td></tr></table></figure>

<p><img src="https://cdn.jsdelivr.net/gh/wickt42/PicGo.img@main/img/20250802102857639.png" alt="image-20250802102857616"></p>
<p><img src="https://cdn.jsdelivr.net/gh/wickt42/PicGo.img@main/img/20250802103128048.png" alt="image-20250802103128025"></p>
<h2 id="实验3：权限管理-UGO"><a href="#实验3：权限管理-UGO" class="headerlink" title="实验3：权限管理(UGO)"></a>实验3：权限管理(UGO)</h2><p>1、创建文件&#x2F;data&#x2F;secret.txt，内容为”Top Secret”</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">mkdir</span> /data</span><br><span class="line">vim /data/secret.txt		<span class="comment"># vim 可以直接创建文件并修改</span></span><br></pre></td></tr></table></figure>

<p><img src="https://cdn.jsdelivr.net/gh/wickt42/PicGo.img@main/img/20250802103654782.png" alt="image-20250802103654748"></p>
<p>2、设置权限：所有者root可读写，组admin可读，其他人无权限</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">groupadd admin</span><br><span class="line"><span class="built_in">chown</span> .admin /data/secret.txt		<span class="comment"># 修改文件属组为admin</span></span><br><span class="line"><span class="built_in">chmod</span> 640 /data/secret.txt 			<span class="comment"># 修改权限，属主rw、属组r、其他没权限</span></span><br><span class="line"><span class="built_in">ls</span> -l /data/secret.txt</span><br></pre></td></tr></table></figure>

<p><img src="https://cdn.jsdelivr.net/gh/wickt42/PicGo.img@main/img/20250802103912366.png" alt="image-20250802103912342"></p>
<p>3、创建用户testuser并尝试访问该文件验证权限</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">useradd testuser</span><br><span class="line">su - testuser</span><br><span class="line"><span class="built_in">cat</span> /data/secret.txt		<span class="comment"># 查看secret.txt文件内容</span></span><br></pre></td></tr></table></figure>

<p><img src="https://cdn.jsdelivr.net/gh/wickt42/PicGo.img@main/img/20250802103958719.png" alt="image-20250802103958694"></p>
<p>4、使用ACL添加testuser的读写权限</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">setfacl -m u:testuser:rw /data/secret.txt		<span class="comment"># 为用户testuser添加读写权限</span></span><br></pre></td></tr></table></figure>

<p><img src="https://cdn.jsdelivr.net/gh/wickt42/PicGo.img@main/img/20250802104305699.png" alt="image-20250802104305671"></p>
<h2 id="实验4：SUID权限应用"><a href="#实验4：SUID权限应用" class="headerlink" title="实验4：SUID权限应用"></a>实验4：SUID权限应用</h2><p>1、创建脚本&#x2F;usr&#x2F;local&#x2F;bin&#x2F;showfile，内容为显示&#x2F;etc&#x2F;shadow文件内容</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">vim /usr/local/bin/showfile</span><br></pre></td></tr></table></figure>

<p><img src="https://cdn.jsdelivr.net/gh/wickt42/PicGo.img@main/img/20250802162509945.png" alt="image-20250802162509878"></p>
<p>2、设置脚本所有者为root并添加SUID权限</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">chmod</span> u+s /usr/local/bin/showfile</span><br></pre></td></tr></table></figure>

<p><img src="https://cdn.jsdelivr.net/gh/wickt42/PicGo.img@main/img/20250802162734401.png" alt="image-20250802162734358"></p>
<p>3、使用普通用户执行该脚本验证权限提升</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 未添加执行权限</span></span><br><span class="line">[root@wickt 桌面]# su - enterprise </span><br><span class="line">[enterprise@wickt ~]$ /usr/local/bin/showfile</span><br></pre></td></tr></table></figure>

<p><img src="https://cdn.jsdelivr.net/gh/wickt42/PicGo.img@main/img/20250802162825104.png" alt="image-20250802162825063"></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 添加执行权限</span></span><br><span class="line">[root@wickt 桌面]# su - enterprise </span><br><span class="line">[enterprise@wickt ~]$ /usr/local/bin/showfile</span><br></pre></td></tr></table></figure>

<p><img src="https://cdn.jsdelivr.net/gh/wickt42/PicGo.img@main/img/20250802163032915.png" alt="image-20250802163032881"></p>
<p>4、实验完成后移除SUID权限</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 未添加执行权限</span></span><br><span class="line"><span class="built_in">chmod</span> u-s /usr/local/bin/showfile</span><br></pre></td></tr></table></figure>

<p><img src="https://cdn.jsdelivr.net/gh/wickt42/PicGo.img@main/img/20250802163353015.png" alt="image-20250802163352983"></p>
<p>要求：对脚本内容进行注释</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment">#showfile</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&#x27;#!/bin/bash				# #!/bin/bash 声明是bash脚本。以 #! 开头的脚本文件 set-uid/set-gid 位会被内核忽略</span></span><br><span class="line"><span class="string">cat /etc/shadow&#x27;</span> &gt; /usr/local/bin/showfile		<span class="comment"># cat /etc/shadow 为实际执行的命令</span></span><br><span class="line"><span class="comment"># echo 将这两行文本写入 /usr/local/bin/showfile 文件中</span></span><br><span class="line"><span class="built_in">chmod</span> +x /usr/local/bin/showfile		<span class="comment"># +x 为所有用户添加x执行权限</span></span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment">#showfile</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&#x27;#!/bin/bash</span></span><br><span class="line"><span class="string">cat /etc/shadow&#x27;</span> &gt; /usr/local/bin/showfile</span><br><span class="line"><span class="built_in">chmod</span> +x /usr/local/bin/showfile</span><br></pre></td></tr></table></figure>



<h2 id="实验5：文件属性保护"><a href="#实验5：文件属性保护" class="headerlink" title="实验5：文件属性保护"></a>实验5：文件属性保护</h2><p>1、创建重要配置文件&#x2F;etc&#x2F;important.conf</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">touch</span> /etc/important.conf</span><br></pre></td></tr></table></figure>

<p><img src="https://cdn.jsdelivr.net/gh/wickt42/PicGo.img@main/img/20250802104848938.png" alt="image-20250802104848911"></p>
<p>2、使用chattr命令防止文件被修改或删除</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">chattr +i /etc/important.conf		<span class="comment">#  -i 文件不能被修改、删除、重命名</span></span><br></pre></td></tr></table></figure>

<p><img src="https://cdn.jsdelivr.net/gh/wickt42/PicGo.img@main/img/20250802105049862.png" alt="image-20250802105049825"></p>
<p>3、尝试修改和删除文件验证保护效果</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">rm</span> -rf /etc/important.conf				<span class="comment"># 删除成文件</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;test&quot;</span> &gt; /etc/important.conf		<span class="comment"># 修改文件</span></span><br></pre></td></tr></table></figure>

<p><img src="https://cdn.jsdelivr.net/gh/wickt42/PicGo.img@main/img/20250802105147517.png" alt="image-20250802105147488"></p>
<p>4、恢复文件正常属性</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">chattr -i /etc/important.conf		<span class="comment"># 删除 i 属性</span></span><br></pre></td></tr></table></figure>

<p><img src="https://cdn.jsdelivr.net/gh/wickt42/PicGo.img@main/img/20250802105246125.png" alt="image-20250802105246093"></p>
<h2 id="实验6：sudo权限配置"><a href="#实验6：sudo权限配置" class="headerlink" title="实验6：sudo权限配置"></a>实验6：sudo权限配置</h2><p>1、创建用户admin和组sudoadmin</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">useradd admin</span><br><span class="line">passwd admin</span><br><span class="line">groupadd sudoadmin</span><br></pre></td></tr></table></figure>

<p><img src="https://cdn.jsdelivr.net/gh/wickt42/PicGo.img@main/img/20250802110115567.png" alt="image-20250802110115533"></p>
<p>2、配置sudo使sudoadmin组成员可以执行所有命令无需密码</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">visudo</span><br><span class="line"><span class="comment"># 在sudoers文件末尾输入 %sudoadmin ALL=(ALL:ALL) ALL</span></span><br><span class="line"><span class="comment"># % 表示不是用户而是用户组，第一个 ALL 是规则对所有主机生效</span></span><br><span class="line"><span class="comment"># ALL:ALL 左侧 ALL 是以任何用户身份运行命令，右侧 ALL 是以任何用户组身份运行命令</span></span><br><span class="line"><span class="comment"># 最后一个 ALL 是可以运行任何命令</span></span><br></pre></td></tr></table></figure>

<p><img src="https://cdn.jsdelivr.net/gh/wickt42/PicGo.img@main/img/20250802110648659.png" alt="image-20250802110648626"></p>
<p>3、将admin用户加入sudoadmin组</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">usermod -aG sudoadmin admin</span><br></pre></td></tr></table></figure>

<p><img src="https://cdn.jsdelivr.net/gh/wickt42/PicGo.img@main/img/20250802110449858.png" alt="image-20250802110449831"></p>
<p>4、验证admin用户可以使用sudo执行特权命令</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">[root@wickt 桌面]# su - admin</span><br><span class="line">[admin@wickt ~]$ <span class="built_in">sudo</span> <span class="built_in">whoami</span></span><br></pre></td></tr></table></figure>

<p><img src="https://cdn.jsdelivr.net/gh/wickt42/PicGo.img@main/img/20250802110808517.png" alt="image-20250802110808490"></p>
<h2 id="实验7：综合权限管理"><a href="#实验7：综合权限管理" class="headerlink" title="实验7：综合权限管理"></a>实验7：综合权限管理</h2><p>1、创建目录&#x2F;project，属组为devteam</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">mkdir</span> /project</span><br><span class="line">groupadd devteam</span><br><span class="line"><span class="built_in">chown</span> .devteam /project			<span class="comment"># 修改目录属组</span></span><br></pre></td></tr></table></figure>

<p><img src="https://cdn.jsdelivr.net/gh/wickt42/PicGo.img@main/img/20250802112702750.png" alt="image-20250802112702722"></p>
<p>2、设置权限：组成员可读写，其他人只读</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">chmod</span> g+w,o-x /project			<span class="comment"># 为组成员添加读权限，删除其他人的执行权限</span></span><br></pre></td></tr></table></figure>

<p><img src="https://cdn.jsdelivr.net/gh/wickt42/PicGo.img@main/img/20250802112624140.png" alt="image-20250802112624100"></p>
<p>3、设置SGID权限使新建文件自动继承组权限</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">chmod</span> g+s /project/</span><br></pre></td></tr></table></figure>

<p><img src="https://cdn.jsdelivr.net/gh/wickt42/PicGo.img@main/img/20250802174559713.png" alt="image-20250802174559676"></p>
<p>4、创建用户dev1、dev2并加入devteam组</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">useradd dev1</span><br><span class="line">useradd dev2</span><br><span class="line">usermod -aG devteam dev1			<span class="comment"># 将用户添加进特定用户组</span></span><br><span class="line">usermod -aG devteam dev2</span><br></pre></td></tr></table></figure>

<p><img src="https://cdn.jsdelivr.net/gh/wickt42/PicGo.img@main/img/20250802112305921.png" alt="image-20250802112305890"></p>
<p>5、验证dev1创建的文件dev2可以编辑</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">[root@wickt 桌面]# su - dev1</span><br><span class="line">[dev1@wickt ~]$ <span class="built_in">touch</span> /project/devshared.txt</span><br><span class="line"></span><br><span class="line">[root@wickt 桌面]# su - dev2</span><br><span class="line">[dev2@wickt ~]$ <span class="built_in">echo</span> <span class="string">&quot;test&quot;</span> &gt; /project/devshared.txt 	<span class="comment"># 在文件末尾追加一行</span></span><br><span class="line">[dev2@wickt ~]$ <span class="built_in">cat</span> /project/devshared.txt 				<span class="comment"># 查看文件</span></span><br><span class="line"><span class="built_in">test</span></span><br></pre></td></tr></table></figure>

<p><img src="https://cdn.jsdelivr.net/gh/wickt42/PicGo.img@main/img/20250802113020751.png" alt="image-20250802113020718"></p>
<h2 id="实验8：日志分析与安全审计"><a href="#实验8：日志分析与安全审计" class="headerlink" title="实验8：日志分析与安全审计"></a>实验8：日志分析与安全审计</h2><p>1、创建日志文件<br> 将以下内容保存为 <code>/var/log/application.log</code>：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">2024-03-15 09:10:22 [INFO] User &#x27;admin&#x27; authenticated from 192.168.1.100 (session: SESS-7X2G9P)</span><br><span class="line">2024-03-15 09:11:05 [ERROR] Failed login attempt for user &#x27;root&#x27; from 10.0.0.55 (reason: invalid password)</span><br><span class="line">2024-03-15 09:12:33 [WARNING] High CPU usage detected (92%) on server-node-01</span><br><span class="line">2024-03-15 09:13:17 [SECURITY] Sensitive file accessed: /etc/shadow by user &#x27;backup&#x27;</span><br><span class="line">2024-03-15 09:14:02 [DEBUG] API request: GET /api/v1/users?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...</span><br><span class="line">2024-03-15 09:15:48 [INFO] Payment processed: $250.00 via Credit Card (ref: PAY-8832)</span><br><span class="line">2024-03-15 09:16:30 [ERROR] Database connection timeout (MySQL@10.0.0.100:3306)</span><br><span class="line">2024-03-15 09:17:11 [ALERT] SSH brute force detected from 45.33.12.88 (15 attempts)</span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">vim /var/log/application.log</span><br></pre></td></tr></table></figure>

<p><img src="https://cdn.jsdelivr.net/gh/wickt42/PicGo.img@main/img/20250802113322237.png" alt="image-20250802113322195"></p>
<p>2、设置权限</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">chmod 640 /var/log/application.log</span><br><span class="line">chown root:adm /var/log/application.log</span><br></pre></td></tr></table></figure>

<p><img src="https://cdn.jsdelivr.net/gh/wickt42/PicGo.img@main/img/20250802113526789.png" alt="image-20250802113526757"></p>
<p><strong>任务1.1</strong>：统计日志中所有错误事件的数量</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">grep -c <span class="string">&quot;ERROR&quot;</span> /var/log/application.log</span><br></pre></td></tr></table></figure>

<p><img src="https://cdn.jsdelivr.net/gh/wickt42/PicGo.img@main/img/20250802113716657.png" alt="image-20250802113716622"></p>
<p><strong>任务1.2</strong>：提取所有包含IP地址的行（仅显示IP）</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">grep -Eo <span class="string">&quot;([0-9]&#123;1,3&#125;\.)&#123;3&#125;[0-9]&#123;1,3&#125;&quot;</span> /var/log/application.log</span><br></pre></td></tr></table></figure>

<p><img src="https://cdn.jsdelivr.net/gh/wickt42/PicGo.img@main/img/20250802113944022.png" alt="image-20250802113943991"></p>
<p><strong>任务2.1</strong>：查看<code>SECURITY</code>事件及其前后1行内容</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">grep -C 1 <span class="string">&quot;SECURITY&quot;</span> /var/log/application.log</span><br></pre></td></tr></table></figure>

<p><img src="https://cdn.jsdelivr.net/gh/wickt42/PicGo.img@main/img/20250802114053240.png" alt="image-20250802114053207"></p>
<p><strong>任务3.1</strong>：找出所有涉及金额的记录（含<code>$</code>符号）</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">grep <span class="string">&quot;\$[0-9]*&quot;</span> /var/log/application.log</span><br></pre></td></tr></table></figure>

<p><img src="https://cdn.jsdelivr.net/gh/wickt42/PicGo.img@main/img/20250802114303880.png" alt="image-20250802114303846"></p>
<p><strong>扩展任务</strong>：提取金额数值并计算总和（自己借助AI写出）</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">grep -oP <span class="string">&#x27;\$\K[\d,]+(\.\d&#123;2&#125;)?&#x27;</span> /var/log/application.log | awk <span class="string">&#x27;&#123;gsub(/,/, &quot;&quot;); sum+=$0&#125; END &#123;printf &quot;$%.2f\n&quot;, sum&#125;&#x27;</span></span><br><span class="line"><span class="comment"># -oP 使用 Perl 正则语法，只输出匹配部分</span></span><br><span class="line"><span class="comment"># \$\K 匹配 $ 符号但不保留在输出中，\K 表示&quot;丢弃之前匹配的内容&quot;</span></span><br><span class="line"><span class="comment"># [\d,]+ 匹配数字和逗号</span></span><br><span class="line"><span class="comment"># (\.\d&#123;2&#125;)? 可选的小数部分</span></span><br><span class="line"><span class="comment"># gsub(/,/, &quot;&quot;) 删除金额中的逗号</span></span><br><span class="line"><span class="comment"># sum+=$0 将数值累加到总和</span></span><br><span class="line"><span class="comment"># printf &quot;$%.2f\n&quot; 格式化输出带美元符号和两位小数</span></span><br></pre></td></tr></table></figure>

<p><img src="https://cdn.jsdelivr.net/gh/wickt42/PicGo.img@main/img/20250802171220252.png" alt="image-20250802171220206"></p>
<p>时间范围统计：统计09:10-09:15期间的事件数量</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">grep -c <span class="string">&quot;09:1[0-5]&quot;</span> /var/log/application.log</span><br></pre></td></tr></table></figure>

<p><img src="https://cdn.jsdelivr.net/gh/wickt42/PicGo.img@main/img/20250802114740306.png" alt="image-20250802114740260"></p>
<p><strong>任务4.1</strong>：检测潜在暴力破解行为</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">grep <span class="string">&quot;Failed login\|brute force&quot;</span> /var/log/application.log		<span class="comment"># 过滤有 Failed login 字段，或 brute force 字段的事件</span></span><br></pre></td></tr></table></figure>

<p><img src="https://cdn.jsdelivr.net/gh/wickt42/PicGo.img@main/img/20250802114828650.png" alt="image-20250802114828614"></p>
<p><strong>任务5.1</strong>：分析脚本文件生成安全事件报告</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">echo</span> <span class="string">&quot;安全事件报告&quot;</span> &gt; report.txt		<span class="comment"># 在 report.txt 文件中写入&quot;安全事件报告&quot;字段</span></span><br><span class="line"><span class="built_in">date</span> &gt;&gt; report.txt					<span class="comment"># 在 report.txt 文件中添加现在的时间</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;=== 高风险事件 ===&quot;</span> &gt;&gt; report.txt		<span class="comment"># 在 report.txt 文件中添加&quot;=== 高风险事件 ===&quot;字段</span></span><br><span class="line">grep -E <span class="string">&quot;SECURITY|ALERT&quot;</span> /var/log/application.log &gt;&gt; report.txt			<span class="comment"># 过滤出带有 SECURITY 或 ALERT 字段的事件记录，并写入 report.txt 文件</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;=== 异常IP列表 ===&quot;</span> &gt;&gt; report.txt			<span class="comment"># 在 report.txt 文件中添加&quot;=== 异常IP列表 ===&quot;字段</span></span><br><span class="line">grep -Eo <span class="string">&quot;([0-9]&#123;1,3&#125;\.)&#123;3&#125;[0-9]&#123;1,3&#125;&quot;</span> /var/log/application.log | <span class="built_in">sort</span> -u &gt;&gt; report.txt			<span class="comment"># 过滤出IP地址字段，使用 sort -u 排序并去重，并写入 report.txt 文件</span></span><br></pre></td></tr></table></figure>

<p><img src="https://cdn.jsdelivr.net/gh/wickt42/PicGo.img@main/img/20250802115039385.png" alt="image-20250802115039340"></p>
</div></article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">Author: </span><span class="post-copyright-info"><a href="mailto:undefined">wickt42</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">Link: </span><span class="post-copyright-info"><a href="http://example.com/2025/08/02/8-2-blog/">http://example.com/2025/08/02/8-2-blog/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">Copyright Notice: </span><span class="post-copyright-info">All articles in this blog are licensed under <a target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a> unless stating additionally.</span></div></div><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/Linux/">Linux</a></div><nav id="pagination"><div class="next-post pull-right"><a href="/2025/08/01/8-1-work-2/"><span>8.1_work</span><i class="fa fa-chevron-right"></i></a></div></nav></div></div><footer class="footer-bg" style="background-image: url(https://gitee.com/John_wick_k/giteepicgo.img/raw/master/img/20250803150508868.jpg)"><div class="layout" id="footer"><div class="copyright">&copy;2013 - 2025 By wickt42</div><div class="framework-info"><span>Driven - </span><a target="_blank" rel="noopener" href="http://hexo.io"><span>Hexo</span></a><span class="footer-separator">|</span><span>Theme - </span><a target="_blank" rel="noopener" href="https://github.com/Molunerfinn/hexo-theme-melody"><span>Melody</span></a></div><div class="footer_custom_text">hitokoto</div><div class="busuanzi"><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><span id="busuanzi_container_page_pv"><i class="fa fa-file"></i><span id="busuanzi_value_page_pv"></span><span></span></span></div></div></footer><i class="fa fa-arrow-up" id="go-up" aria-hidden="true"></i><script src="https://cdn.jsdelivr.net/npm/animejs@latest/lib/anime.min.js"></script><script src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js"></script><script src="https://cdn.jsdelivr.net/npm/velocity-animate@latest/velocity.min.js"></script><script src="https://cdn.jsdelivr.net/npm/velocity-ui-pack@latest/velocity.ui.min.js"></script><script src="/js/utils.js?version=1.9.1"></script><script src="/js/fancybox.js?version=1.9.1"></script><script src="/js/sidebar.js?version=1.9.1"></script><script src="/js/copy.js?version=1.9.1"></script><script src="/js/fireworks.js?version=1.9.1"></script><script src="/js/transition.js?version=1.9.1"></script><script src="/js/scroll.js?version=1.9.1"></script><script src="/js/head.js?version=1.9.1"></script><script>if(/Android|webOS|iPhone|iPod|iPad|BlackBerry/i.test(navigator.userAgent)) {
  $('#nav').addClass('is-mobile')
  $('footer').addClass('is-mobile')
  $('#top-container').addClass('is-mobile')
}</script><script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"pluginRootPath":"live2dw/","pluginJsPath":"lib/","pluginModelPath":"assets/","model":{"jsonPath":"/live2dw/assets/tororo.model.json"},"display":{"superSample":2,"width":210,"height":420,"position":"left","hOffset":0,"vOffset":-20},"log":false,"tagMode":false});</script></body></html>